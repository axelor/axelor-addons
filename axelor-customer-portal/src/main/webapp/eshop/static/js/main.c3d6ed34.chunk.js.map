{"version":3,"sources":["Eshop/components/Loader.js","services/RestService.js","services/globals.js","Eshop/EshopAPI.js","Eshop/providers/SessionProvider.js","Eshop/providers/EshopProvider.js","Eshop/components/Divider.js","Eshop/components/PriceSummary.js","Eshop/components/Paper.js","Eshop/components/Input.js","Eshop/components/Select.js","Eshop/components/QuantityInput.js","Eshop/providers/TranslationProvider.js","Eshop/components/ConfirmationDialog.js","Eshop/components/ConfirmationDialogButton.js","Eshop/components/Checkout.js","Eshop/containers/CheckoutMessage.js","Eshop/containers/Checkout.js","Eshop/components/Carousel.js","Eshop/containers/ProductView.js","Eshop/components/Pagination.js","Eshop/components/Chip.js","Eshop/components/CategoryList.js","Eshop/components/SearchInput.js","Eshop/hooks/useDebounce.js","Eshop/components/ProductSearch.js","Eshop/components/List.js","Eshop/components/ProductCard.js","Eshop/components/CatalogProductCard.js","Eshop/components/ProductList.js","Eshop/hooks/usePagination.js","Eshop/containers/ProductList.js","Eshop/containers/EshopView.js","Eshop/pages/Eshop.js","Eshop/components/AddressCard.js","Eshop/components/AddressList.js","Eshop/containers/AddressList.js","Eshop/components/AutoComplete.js","Eshop/components/AddressForm.js","Eshop/containers/AddressForm.js","Eshop/hooks/useInfiniteLoading.js","Eshop/pages/Address.js","Eshop/components/PaymentCardForm.js","Eshop/containers/PaymentCardForm.js","Eshop/containers/utils.js","Eshop/components/PaymentCard.js","Eshop/components/PaymentCardList.js","Eshop/containers/PaymentCardList.js","Eshop/pages/PaymentCard.js","Eshop/components/BackButton.js","Eshop/containers/Topbar.js","Eshop/EshopApp.js","Eshop/providers/ThemeProvider.js","Eshop/providers/SnackbarProvider.js","Eshop/index.js","serviceWorker.js","index.js"],"names":["useStyles","makeStyles","theme","root","height","width","position","display","justifyContent","alignItems","top","color","bottom","palette","secondary","main","animationDuration","Loader","lastCookieString","props","classes","className","CircularProgress","variant","value","size","thickness","disableShrink","lastCookies","readCookie","name","cookieString","document","cookie","split","reduce","obj","parts","AxelorRest","http","entity","this","data","put","post","id","delete","records","map","version","options","get","fieldName","baseURL","interceptor","instance","axios","create","e","console","log","callback","includes","url","config","overrideHeaders","headers","$headers","token","withCredentials","Object","assign","accept","keys","length","method","JSON","stringify","_config","doRequest","request","timeoutRequest","delay","Promise","resolve","reject","setTimeout","Error","race","then","res","status","catchError","logout","catch","bind","intercept","username","password","isAuth","undefined","appUser","app","description","user","code","language","email","info","xhr","XMLHttpRequest","doClean","open","forEach","k","setRequestHeader","overrideMimeType","onload","abort","onreadystatechange","readyState","callbackInterceptor","result","parse","responseText","upload","onprogress","fileSize","total","parseFloat","loaded","done","Math","round","progress","transfer","format","toFixed","formatSize","lengthComputable","send","objects","globals","key","set","clear","getMetafileURL","metafileId","RestService","defaults","handleResponse","message","handleProductInformation","product","hasPictures","_pictures","images","handleImageURL","symbol","_currency","_previousPrice","_displayPrice","_displayDiscountPrice","_price","handleDisplayPrice","_discount","_displayDiscountPercentage","handleDiscount","productTypeSelect","Number","_realQty","unavailable","handleUnavailablity","complementaryProducts","complementaryProductList","qty","optional","filter","p","isNaN","handleComplementaryProducts","handlePaginationTypeDataResponse","handleEmptyObjectDataReponse","handleEmptyArrayDataResponse","handleUndefinedDataResponse","defaultValue","getDisplayAddress","addressEntity","address","addressComplement","zipCode","countryName","cityName","displayAddress","_zipCode","_cityName","isZipOnLeftOnEshop","point","addSuffix","str","suffix","withSpace","getPurchaseCurrencySymbol","currency","handleCheckoutInformation","checkout","currencySymbol","addCurrencySymbol","totalTax","totalWithoutTax","totalDiscount","mapCurrencySymbol","invoicingAddress","getInverseMappedAddress","mainInvoicingAddress","deliveryAddress","date","checkoutDate","inTaxTotal","taxTotal","exTaxTotal","_discountTotal","lines","line","productName","unitPrice","price","vat","taxLine","discount","productId","getLines","saleOrderLineList","itemsChanged","original","paymentModes","mapCheckout","handleCheckoutItemChange","handleReturnDataFromResponse","handleTransformDataResponse","transform","handleAddDisplayAddress","handleTransformProductsInformation","products","handleTransformCardsInformation","cards","handleCardInformation","handleTransformInverseMapAddress","addresses","handleTransformDisplayAddress","manageQueryString","query","qs","getQueryString","getMappedAddress","addressL4","addressL2","zip","cityId","city","addressL7CountryId","country","addressL7Country","handleCityInformation","label","handleTransformCities","cities","createCheckoutOrderData","cart","deliveryAddressId","mainInvoicingAddressId","_cart","push","quantity","card","expiry","brand","expiryMonth","slice","expiryYear","expiryDisplay","cardNumber","last4","String","fetchProducts","URL","fetchProduct","fetchCategories","fetchCategoryProducts","categoryId","fetchAddresses","fetchAddress","addressId","addAddress","deleteAddress","updateAddress","fetchCities","search","countryId","searchInput","fetchCountries","checkCart","payload","checkoutPaypal","paypalPaymentData","orderData","paypalOrderId","_orderData","checkoutPaybox","redirectURL","window","location","href","successURL","failureURL","checkoutPaymentCard","cardId","checkoutQuotation","fetchPaymentCards","fetchPaymentCard","addPaymentCard","updatePaymentCard","deletePaymentCard","fetchPaymentCardConfiguration","isPaymentCardActivated","isStripeActivated","fetchDefaultPaymentCard","updateDefaultPaymentCard","fetchPaypalMerchantId","fetchTranslations","Array","isArray","acc","fetchConfiguration","isQuotationRequestActive","isDataPolicyRequired","dataPolicyMetaFile","isReturnPolicyRequired","returnPolicyMetaFile","isTermRequired","termMetaFile","isAllowOutOfStock","fetchInfo","checkInfo","SessionContext","React","createContext","useSession","useContext","SessionProvider","children","useState","loading","setLoading","setData","useEffect","EshopAPI","finally","Provider","getLocalStorageItem","localStorage","getItem","err","setLocalStorageItem","setItem","EshopContext","useEshop","EshopProvider","userId","checkoutAddresses","setStore","setCart","useCallback","store","setCheckoutAddresses","setConfig","clearCart","setInvoicingAddress","setDeliveryAddress","clearItem","getLocalStorageCart","getLocalStorageAddress","setLocalStorageCart","setLocalStorageAddress","state","useMemo","divider","borderColor","Divider","rest","clsx","row","marginBottom","spacing","PriceSummary","totalLabel","totalWithoutTaxLabel","totalTaxLabel","totalDiscountLabel","Typography","defaultProps","withStyles","overflow","backgroundColor","borderRadius","elevation1","boxShadow","Paper","useInputStyles","border","transition","transitions","fade","disabled","focused","useInputLabelStyles","whiteSpace","textOverflow","maxWidth","error","asterisk","filled","Input","forwardRef","ref","readOnly","InputProps","inputClasses","inputLabelClasses","TextField","margin","fullWidth","InputLabelProps","shrink","disableUnderline","Boolean","helperText","useSelectStyles","useMenuStyles","paper","maxHeight","useMenuItemStyles","light","selected","usePopoverClasses","Select","onLoadMore","showLoadingOption","onOpen","onClose","selectRef","useRef","anchorPosition","setAnchorPosition","useTheme","fullScreen","useMediaQuery","breakpoints","down","selectClasses","menuClasses","menuItemClasses","popoverClasses","handleOpen","event","current","getBoundingClientRect","left","handleClose","select","SelectProps","MenuProps","anchorReference","PopoverClasses","BackdropProps","invisible","onScroll","target","scrollTop","scrollHeight","clientHeight","option","MenuItem","Box","input","MozAppearance","WebkitAppearance","QuantityInput","maxItems","moreLabel","onChange","moreThanMax","setMoreThanMax","inputRef","isDecimal","focus","handleMoreThanMax","handleChange","activeElement","blur","inputProps","type","min","i","translations","en","fr","i18n","i18next","createInstance","lng","navigator","use","initReactI18next","Backend","LanguageDetector","init","fallbackLng","interpolation","escapeValue","backend","lang","exec","groups","getLanguageFromURL","defaultTranslations","removeEmptyTranslation","keySeparator","TranslationProvider","I18nextProvider","useTranslation","i18nextUseTranslation","ConfirmationDialog","t","onConfirm","onCancel","title","Dialog","DialogTitle","DialogContent","DialogActions","Button","onClick","ConfirmationDialogButton","ButtonProps","DialogProps","dialogOpen","setDialogOpen","handleOpenDialog","handleCloseDialog","handleConfirm","RequestQuotationButton","ConfirmOrderButton","usePayboxButtonStyles","button","PayboxButton","PaymentCardButton","showButton","useCheckoutPriceSummaryStyles","padding","actionContainer","spaceBetween","termWrapper","flexDirection","marginTop","term","termLink","textDecoration","actionWrapper","actionTitle","action","CheckoutSummary","PaypalButtonProps","PayboxButtonProps","RequestQuotationButtonProps","PaymentCardButtonProps","ConfirmOrderButtonProps","Terms","showTerms","some","show","classnames","required","Checkbox","checked","setChecked","fileURL","rel","style","shape","useCheckoutAddressStyles","container","header","headerAction","fontSize","CheckoutAddress","deliveryAddresses","invoicingAddresses","onNewAddress","onDeliveryAddressChange","onInvoicingAddressChange","Grid","item","xs","md","CheckoutProductQuantityInput","setQty","overrideInput","qtyNumber","handleQtyChange","handleQtyBlur","onBlur","useCheckoutProductLinesStyles","CheckoutProductLines","onNewProduct","onProductQuantityChange","onProductDelete","index","zeroMinWidth","noWrap","align","IconButton","backdrop","zIndex","appBar","Checkout","productLines","checkingOut","summaryMessage","deleteDialogStore","setDeleteDialogStore","handleDeleteDialogClose","handleDeleteDialogOpen","handleProductDelete","Backdrop","MESSAGE_TYPE","useCheckoutMessageContainerStyles","minHeight","success","failure","CheckoutMessageContainer","match","onSuccessRedirect","onFailureRedirect","onSuccessMount","params","messageType","successMessage","successButtonLabel","failureMessage","failureButtonLabel","content","useTerm","file","setFile","setRequired","CheckoutContainer","history","onRedirectToOrder","onRedirectToQuotation","onRedirectToCheckoutMessage","enqueueSnackbar","useSnackbar","setStorageInvoicingAddress","setStorageDeliveryAddress","setCheckingOut","setCheckout","setDeliveryAddresses","setInvoicingAddresses","paypalMerchantId","setPaypalMerchantId","canRequestQuotation","setCanRequestQuotation","confirmOrder","setConfirmOrder","dataTermState","dataTerm","returnPolicyTermState","returnPolicyTerm","termState","getAddressById","find","toString","fetchCheckoutData","hasZeroQuantity","l","updatedCart","cartQty","handleAddressChange","cb","handleDeliveryAddressChange","handleInvoicingAddressChange","handleEshopRedirection","replace","handleNewProduct","handleNewAddress","pathname","fromUrl","handleProductQuantityChange","handleCheckoutAction","order","isQuotation","handlePaypalCheckout","handlePaymentCardCheckout","CheckoutMessageType","handlePayboxCheckout","link","createElement","click","handleCheckoutQuotation","quotation","handleConfirmOrder","manageAddress","setAddress","merchantId","disableCheckoutAction","hidePaypalButton","hidePayboxButton","hideCreateOrderButton","originalTotal","currencyCode","paypalClientId","process","amount","onSuccess","clientId","disableFunding","checkoutEnabled","termsAccepted","accepted","DataTerm","ReturnPolicyTerm","Term","carousel","indicator","background","cursor","image","backgroundPosition","backgroundRepeat","backgroundSize","Carousel","renderIndicator","onClickHandler","isSelected","aria-label","onKeyDown","role","tabIndex","showStatus","showArrows","showThumbs","swipeable","emulateTouch","backgroundImage","useProductInformationStyles","tag","tagLabel","fontWeight","productTitle","chip","marginRight","productOriginalPrice","productPrice","ProductInformation","allowOutOfStock","onQuantityChange","onAddProduct","onComplementaryProductChange","isUnavailable","discountPercentage","discountedPrice","categories","_categories","category","dangerouslySetInnerHTML","__html","gutterBottom","FormControlLabel","control","startIcon","ProductView","setQuantity","setProduct","setComplementaryProducts","handleAddProduct","handleQuantityChange","handleComplementaryProductChange","updates","Pagination","onNext","onPrevious","disableNext","disablePrevious","icon","iconSelected","chipSelected","chipClickable","Chip","Icon","clickable","chipContainer","flexWrap","selectedCategoryId","onCategoryClick","borderBottomColor","SearchInput","endAdornment","useDebounce","duration","timer","clearTimer","clearTimeout","setTimer","args","valueProp","setValue","debounceChange","onSubmit","preventDefault","placeholder","List","values","ValueUniqueKey","ItemContainerProps","noRecordLabel","renderItem","sm","getItemContainerProps","useProductTagStyles","right","ProductTag","useProductInformation","flexGrow","productDescription","productDiscountedDisplayPrice","hasImage","innerHTML","innerText","pb","useProductImageStyles","productImage","flexShrink","ProductImage","ProductCard","handleClick","useBadgeStyles","badge","minWidth","paddingLeft","paddingRight","boxSizing","Badge","count","ProductList","CatalogProductCard","usePagination","page","limit","changePage","nextPage","previousPage","paginationHandler","filters","ALL_CATEGORY","ProductListContainer","paginationStore","totalProducts","loadingProducts","setProductsStore","previouslySetCategoryId","URLSearchParams","loadingCategories","setCategoriesStore","setSearchInput","handleChangePage","a","concat","handleResult","offset","handleCategoryClick","chipId","handleProductClick","CategoryList","ProductSearch","isAti","EshopViewContainer","path","handleRedirectToCheckout","handleRedirectToEshop","handleRedirectToCheckoutMessage","render","CheckoutMessage","component","ProductViewContainer","to","Eshop","AddressCard","onDelete","onEdit","justify","AddressList","AddressListContainer","onNew","handleCloseDeleteDialog","handleRemoveAddressFromList","listbox","AutoComplete","getOptionLabel","o","handleInputSearch","Autocomplete","ListboxProps","renderInput","AddressForm","errors","countries","layout","fetchingCities","onClear","onLoadMoreCities","handleCitySearchChange","components","disableClearable","mt","mb","ml","noValidate","span","useCitites","fetchAPI","transformProp","setTotal","fetching","setFetching","pageRef","hasMore","fetchData","append","reset","_data","loadMore","useInfiniteLoading","totalCities","loadMoreCities","AddressFormContainer","redirectToAddressList","saving","setSaving","setCountries","validateOnChange","setValidateOnChange","personName","citySearchInput","setCitySearchInput","debouncedFetchCities","handleRedirectAfterSave","handleSubmitAddress","useFormik","initialValues","validate","enableReinitialize","handleChangeFormik","handleSubmitFormik","handleSubmit","setValues","setFieldValue","handleClear","handleLoadMoreCities","Address","newAddressPath","editAddressPath","addressListPath","handleRedirect","redirectToNewAddress","redirectToEditAddress","withRouterProps","Component","routerProps","MaskInput","other","getInputRef","onValueChange","isNumericString","cardExpiry","val","month","max","substring","year","PaymentCardForm","inputComponent","cvc","raised","PaymentCardFormContainer","redirectToCardList","setCard","handleSubmitPaymentCard","backgrounds","cardBrandBackground","visa","mastercard","default","toLowerCase","text","number","letterSpacing","PaymentCard","isDefault","onDefault","handleDelete","handleEdit","handleDefault","PaymentCardList","defaultCardId","usePaymentCardListStyles","loader","inset","PaymentCardListContainer","setCards","defaultPaymentCardId","setDefaultPaymentCardId","deleteDialogOpen","setDeleteDialogOpen","savingDefault","setSavingDefault","handleUpdateDefaultCard","handleRemoveCardFromList","newPaymentCardPath","editPaymentCardPath","paymentCardListPath","redirectToNewCard","redirectToEditCard","exact","useBackButtonStyles","BackButton","useClientToolbarStyles","ClientToolbar","onBack","useShoppingCartStyles","ShoppingCart","cartLength","b","badgeContent","useEshopToolbarStyles","grow","eshopName","sidebarPaper","paddingTop","listItem","EshopToolbar","showMenuButton","showBackButton","onCheckout","onLinkClick","sideBarOpen","setSideBarOpen","handleLinkClick","links","ShoppingBasketIcon","AddressIcon","PaymentCardIcon","Drawer","anchor","ModalProps","disablePortal","PaperProps","Fragment","ListItem","ListItemIcon","ListItemText","primary","useGeneralToolbarStyles","tabsIndicator","tabRoot","tabSelected","rippleChild","GeneralToolbar","activeLink","Tabs","route","active","Tab","TouchRippleProps","child","Topbar","appbar","toolbar","getActiveLink","handleCheckout","handleRedirectToAddressList","handleRedirectToPaymentCardList","handleAddressFormOnBack","generalToolbarProps","AppBar","Toolbar","withRouter","spacingUnit","marginLeft","EshopContainer","userLanguage","addressPath","paymentCardPath","eshopPath","paymentCardConfiguration","changeLanguage","COLORS","darkBlue","grey","green","lightGreen","createMuiTheme","contrastText","overrides","MuiTypography","colorTextPrimary","MuiButton","MuiInput","MuiTextField","custom","muiMakeStyles","ThemeProvider","CssBaseline","SnackbarProvider","anchorOrigin","vertical","horizontal","autoHideDuration","maxSnack","Suspense","fallback","EshopApp","hostname","ReactDOM","StrictMode","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c3d6ed34.chunk.js","sourcesContent":["import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: 'inherit',\n    width: 'inherit',\n    position: 'relative',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  top: {\n    color: '#eef3fd',\n  },\n  bottom: {\n    color: theme.palette.secondary.main,\n    animationDuration: '250ms',\n    position: 'absolute',\n  },\n}));\n\nfunction Loader(props) {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <CircularProgress\n        variant=\"determinate\"\n        value={100}\n        className={classes.top}\n        size={24}\n        thickness={4}\n        {...props}\n      />\n      <CircularProgress\n        variant=\"indeterminate\"\n        disableShrink\n        className={classes.bottom}\n        size={24}\n        thickness={4}\n        {...props}\n      />\n    </div>\n  );\n}\n\nexport default Loader;\n","import axios from 'axios';\n\nlet lastCookieString;\nlet lastCookies = {};\n\nexport function readCookie(name) {\n  let cookieString = document.cookie || '';\n  if (cookieString !== lastCookieString) {\n    lastCookieString = cookieString;\n    lastCookies = cookieString.split('; ').reduce((obj, value) => {\n      let parts = value.split('=');\n      obj[parts[0]] = parts[1];\n      return obj;\n    }, {});\n  }\n  return lastCookies[name];\n}\n\nexport class AxelorRest {\n  constructor(http, entity) {\n    this.http = http;\n    this.entity = entity;\n  }\n\n  insert(data) {\n    return this.http.put('/ws/rest/' + this.entity, data);\n  }\n\n  update(data) {\n    return this.http.post('/ws/rest/' + this.entity, data);\n  }\n\n  delete(id) {\n    return this.http.delete('/ws/rest/' + this.entity + '/' + id);\n  }\n\n  deleteAll(records) {\n    return this.http.post(`/ws/rest/${this.entity}/removeAll`, {\n      records: records.map(({ id, version }) => ({ id, version })),\n    });\n  }\n\n  fetch(id, options) {\n    return this.http.post(\n      '/ws/rest/' + this.entity + '/' + id + '/fetch',\n      options\n    );\n  }\n\n  copy(id, options) {\n    return this.http.get(\n      '/ws/rest/' + this.entity + '/' + id + '/copy',\n      options\n    );\n  }\n\n  details(id, fieldName) {\n    return this.http.get(\n      '/ws/rest/' + this.entity + '/' + id + '/details?name=' + fieldName\n    );\n  }\n\n  search(options = {}) {\n    return this.http.post(\n      '/ws' + (this.entity ? `/rest/${this.entity}` : '') + '/search',\n      options\n    );\n  }\n}\n\nexport class Http {\n  constructor({ baseURL = '/' } = {}, interceptor = null) {\n    this.instance = axios.create({\n      baseURL,\n    });\n    this.interceptor = interceptor;\n  }\n\n  catchError(e) {\n    console.log('catch error', e);\n    if (this.callback) {\n      this.callback(e);\n    } else if (`${e}`.includes('401')) {\n      // window.location.reload();\n    }\n  }\n\n  request(url, data = {}, config = {}, overrideHeaders) {\n    const {\n      headers: $headers = {},\n      token = true,\n      withCredentials = true,\n    } = config;\n    const headers = {\n      ...(token ? { 'X-CSRF-Token': readCookie('CSRF-TOKEN') } : {}),\n      ...(overrideHeaders ||\n        Object.assign(\n          {},\n          {\n            accept: 'application/json',\n            'x-requested-with': 'XMLHttpRequest',\n          },\n          $headers,\n          Object.keys(data).length ? { 'content-type': 'application/json' } : {}\n        )),\n    };\n\n    const options = Object.assign(\n      {\n        url,\n        method: 'POST',\n        headers,\n        data:\n          headers['content-type'] === 'application/json'\n            ? JSON.stringify(data)\n            : data,\n        // timeout: 60000,\n      },\n      config,\n      { withCredentials }\n    );\n\n    if (\n      (options.method === 'GET' || options.method === 'HEAD') &&\n      options.data\n    ) {\n      delete options.data;\n    }\n\n    return this.instance(options);\n  }\n\n  intercept(url, method = 'GET', data = {}, headers, config = {}) {\n    const _config = Object.assign(\n      {\n        method,\n        withCredentials: true,\n      },\n      config\n    );\n\n    const doRequest = () => this.request(url, data, _config, headers);\n    const timeoutRequest = (delay = 100000) =>\n      new Promise((resolve, reject) => {\n        setTimeout(() => {\n          reject(new Error('Request failed Timeout'));\n        }, delay);\n      });\n\n    return Promise.race([\n      timeoutRequest(),\n      doRequest().then((res) => {\n        if (res.status === 401) {\n          return this.catchError({ logout: true });\n        }\n        return res.data;\n      }),\n    ]).catch(this.catchError.bind(this));\n  }\n\n  get(url, headers, config) {\n    return this.intercept(url, 'GET', {}, headers, config);\n  }\n\n  post(url, data, headers) {\n    return this.intercept(url, 'POST', data, headers);\n  }\n\n  patch(url, data, headers) {\n    return this.intercept(url, 'PATCH', data, headers);\n  }\n\n  put(url, data, headers) {\n    return this.intercept(url, 'PUT', data, headers);\n  }\n\n  delete(url, headers) {\n    return this.intercept(url, 'DELETE', {}, headers);\n  }\n\n  head(url, headers) {\n    return this.intercept(url, 'HEAD', {}, headers);\n  }\n\n  action(url, data) {\n    return this.intercept('/ws/action' + url, 'POST', data);\n  }\n\n  rest(entity) {\n    return new AxelorRest(this, entity);\n  }\n\n  login(data = {}) {\n    var config = Object.assign({}, this.config || {}, data);\n    return this.request(\n      '/callback',\n      {\n        username: config.username,\n        password: config.password,\n      },\n      { token: false }\n    )\n      .then((res) => {\n        var isAuth = null;\n        if (res === undefined) {\n          throw new Error('Failed To Connect !!');\n        }\n        if (res && res.status === 401) {\n          isAuth = false;\n        } else if (res && res.status === 200) {\n          isAuth = true;\n          this.config = config;\n          /*\n           Custom Cookie\n           res.headers['csrf-token'] &&\n             (document.cookie = `CSRF-TOKEN=${res.headers['csrf-token']}`);\n          */\n        }\n        return isAuth;\n      })\n      .catch(this.catchError.bind(this));\n  }\n\n  logout() {\n    return this.get('/logout');\n  }\n\n  info() {\n    return this.get('/ws/app/info');\n  }\n\n  checkInfo() {\n    return this.request('/ws/app/info', {}, { method: 'GET' })\n      .then((res) => res.data)\n      .then((res) => ({\n        appUser: res,\n        app: {\n          name: res['application.name'],\n          version: res['application.version'],\n          description: res['application.description'],\n        },\n        user: {\n          id: res['user.id'],\n          code: res['user.login'],\n          name: res['user.name'],\n          language: res['user.lang'] || 'en',\n          email: res['user.login'],\n          theme: res['user.theme'] || '',\n        },\n      }));\n  }\n\n  upload(data = null, headers = {}, callback = () => true, info = {}) {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest(),\n        method = 'POST',\n        url = '/ws/files/upload';\n\n      const doClean = () =>\n        headers['X-File-Id']\n          ? this.intercept(() => this.delete(`${url}/${headers['X-File-Id']}`))\n          : Promise.resolve(true);\n\n      const formatSize = (done, total) => {\n        const format = (size) => {\n          if (size > 1000000000)\n            return parseFloat(size / 1000000000).toFixed(2) + ' GB';\n          if (size > 1000000)\n            return parseFloat(size / 1000000).toFixed(2) + ' MB';\n          if (size >= 1000) return parseFloat(size / 1000).toFixed(2) + ' KB';\n          return size + ' B';\n        };\n        return format(done || 0) + '/' + format(total);\n      };\n\n      xhr.open(method, url, true);\n\n      Object.keys(headers).forEach((k) => {\n        xhr.setRequestHeader(k, headers[k]);\n      });\n\n      xhr.withCredentials = true;\n      xhr.overrideMimeType('application/octet-stream');\n      xhr.setRequestHeader('Content-Type', 'application/octet-stream');\n      xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      xhr.setRequestHeader('X-CSRF-Token', readCookie('CSRF-TOKEN'));\n\n      xhr.onload = () => {\n        callback(100);\n      };\n\n      info.abort = () => {\n        xhr.abort();\n        return doClean();\n      };\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          switch (xhr.status) {\n            case 401:\n              this.callbackInterceptor();\n              throw new Error('Unauthorized !!');\n            case 200:\n              try {\n                const result = JSON.parse(xhr.responseText);\n                resolve(result);\n              } catch (e) {\n                resolve(xhr.responseText);\n              }\n              break;\n            default:\n              doClean();\n              reject({ status: xhr.status });\n              break;\n          }\n        }\n      };\n\n      xhr.upload.onprogress = (e) => {\n        const fileSize = headers['X-File-Size'];\n        const total = parseFloat(headers['X-File-Offset']) + e.loaded;\n        const done = Math.round((total / fileSize) * 100);\n\n        info.progress = done > 95 ? '95%' : done + '%';\n        info.transfer = formatSize(total, fileSize);\n        info.loaded = total === fileSize;\n\n        if (e.lengthComputable) {\n          callback((e.loaded / e.total) * 100, info);\n        }\n      };\n\n      xhr.send(data);\n    });\n  }\n}\n\nexport default new Http({\n  baseURL: process.env.NODE_ENV === 'production' ? '../' : '/axelor-erp', // '/' for portal\n});\n","const objects = {};\n\nexport function get(key) {\n  return objects[key];\n}\n\nexport function set(key, value) {\n  return (objects[key] = value);\n}\n\nexport function clear(key) {\n  delete objects[key];\n}\n\nconst globals = { get, set, clear };\n\nexport default globals;\n","import qs from 'qs';\n\nimport RestService from '../services/RestService';\nimport globals from '../services/globals';\n\nexport const PRODUCT_TYPESELECT_SERVICE = 'service';\n\nfunction getMetafileURL(metafileId) {\n  return `./${RestService.instance.defaults.baseURL}ws/portal/metafile/${metafileId}`; //`/ws/portal/metafile/${metafileId}` for portal\n}\n\nfunction getQueryString(query) {\n  return qs.stringify(query);\n}\n\nfunction handleResponse(res) {\n  if (res && res.status === 0) {\n    return res;\n  } else {\n    throw new Error(res && res.message);\n  }\n}\n\nfunction handleImageURL(product) {\n  const hasPictures = product._pictures && product._pictures.length;\n  product.images = hasPictures ? product._pictures.map(getMetafileURL) : [];\n  return product;\n}\n\nfunction handleDisplayPrice(product) {\n  const symbol = product && product._currency && product._currency.symbol;\n  if (symbol) {\n    if (product._previousPrice) {\n      product._displayPrice = symbol + product._previousPrice;\n      product._displayDiscountPrice = symbol + product._price;\n    } else {\n      product._displayPrice = symbol + product._price;\n    }\n  }\n  return product;\n}\n\nfunction handleDiscount(product) {\n  if (product._discount && product._discount.includes('%')) {\n    product._displayDiscountPercentage = product._discount;\n  }\n  return product;\n}\n\nfunction handleUnavailablity(product) {\n  if (product.productTypeSelect === PRODUCT_TYPESELECT_SERVICE) {\n    return product;\n  }\n\n  if (!Number(product._realQty)) {\n    product.unavailable = true;\n  }\n  return product;\n}\n\nfunction handleComplementaryProducts(product) {\n  product.complementaryProducts = (product.complementaryProductList || [])\n    .map(({ product = {}, qty, optional }) => ({\n      id: product?.id,\n      qty: Number(qty),\n      name: product.name,\n      optional,\n    }))\n    .filter((p) => p.id)\n    .filter((p) => !isNaN(parseFloat(p.qty)));\n\n  product.complementaryProductList = null;\n  return product;\n}\n\nfunction handleProductInformation(product) {\n  handleImageURL(product);\n  handleDisplayPrice(product);\n  handleDiscount(product);\n  handleUnavailablity(product);\n  handleComplementaryProducts(product);\n  return product;\n}\n\nfunction handlePaginationTypeDataResponse() {\n  return {\n    data: [],\n    total: 0,\n  };\n}\n\nfunction handleEmptyObjectDataReponse() {\n  return {};\n}\n\nfunction handleEmptyArrayDataResponse() {\n  return [];\n}\n\nfunction handleUndefinedDataResponse(res, defaultValue = []) {\n  res.data = res.data || defaultValue;\n  return res;\n}\n\nfunction getDisplayAddress(\n  addressEntity,\n  config = globals.get('config') || {}\n) {\n  const {\n    address,\n    addressComplement,\n    zipCode,\n    countryName,\n    cityName,\n  } = addressEntity;\n\n  let displayAddress = `${address || ''} ${addressComplement || ''}`;\n\n  const _zipCode = `${zipCode || ''}`;\n  const _cityName = `${cityName || ''}`;\n\n  displayAddress += config?.isZipOnLeftOnEshop\n    ? ` ${_zipCode} ${_cityName}`\n    : ` ${_cityName} ${_zipCode}`;\n\n  displayAddress += ` ${countryName || ''}`;\n\n  return displayAddress;\n}\n\nfunction mapCheckout(checkout) {\n  const currencySymbol = getPurchaseCurrencySymbol(checkout);\n\n  const invoicingAddress = getInverseMappedAddress(\n    checkout.mainInvoicingAddress\n  );\n  const deliveryAddress = getInverseMappedAddress(checkout.deliveryAddress);\n\n  invoicingAddress.displayAddress = getDisplayAddress(invoicingAddress);\n  deliveryAddress.displayAddress = getDisplayAddress(deliveryAddress);\n\n  return {\n    id: checkout.id,\n    date: checkout.checkoutDate,\n    total: checkout.inTaxTotal || '0.00',\n    totalTax: checkout.taxTotal || '0.00',\n    totalWithoutTax: checkout.exTaxTotal || '0.00',\n    totalDiscount: checkout._discountTotal || '0.00',\n    currency: checkout.currency,\n    invoicingAddress,\n    deliveryAddress,\n    lines: getLines(checkout.saleOrderLineList),\n    itemsChanged: checkout.itemsChanged,\n    original: { total: checkout.inTaxTotal },\n    paymentModes: checkout.paymentModes || [],\n  };\n\n  function getLines(lines = []) {\n    return lines.map((line) => {\n      return {\n        id: line.id,\n        name: line.productName,\n        qty: toFixed(line.qty),\n        unitPrice: currencySymbol\n          ? addSuffix(toFixed(line.price), currencySymbol)\n          : toFixed(line.price),\n        vat:\n          line.taxLine && line.taxLine.value\n            ? addSuffix(toFixed(line.taxLine.value * 100), '%')\n            : '',\n        discount: currencySymbol\n          ? addSuffix(toFixed(line._discountTotal || '0.00'), currencySymbol)\n          : '0.00',\n\n        total: currencySymbol\n          ? addSuffix(toFixed(line.inTaxTotal), currencySymbol)\n          : toFixed(line.inTaxTotal),\n        productId: line.product && line.product.id,\n        productTypeSelect: line.product && line.product.productTypeSelect,\n      };\n    });\n  }\n}\n\nfunction toFixed(value, point = 2) {\n  return Number.parseFloat(value).toFixed(point);\n}\n\nfunction addSuffix(str, suffix, withSpace = true) {\n  return withSpace ? str + ' ' + suffix : str + suffix;\n}\n\nfunction getPurchaseCurrencySymbol(entity) {\n  return entity && entity.currency && entity.currency.symbol;\n}\n\nfunction mapCurrencySymbol(entity) {\n  const currencySymbol = getPurchaseCurrencySymbol(entity);\n\n  if (!currencySymbol) {\n    return entity;\n  }\n\n  const addCurrencySymbol = (str) => addSuffix(str, currencySymbol);\n\n  return Object.assign(entity, {\n    total: addCurrencySymbol(entity.total),\n    totalTax: addCurrencySymbol(entity.totalTax),\n    totalWithoutTax: addCurrencySymbol(entity.totalWithoutTax),\n    totalDiscount: addCurrencySymbol(entity.totalDiscount),\n  });\n}\n\nfunction handleCheckoutInformation(checkout) {\n  return mapCurrencySymbol(mapCheckout(checkout));\n}\n\nfunction handleCheckoutItemChange(checkout) {\n  const { itemsChanged } = checkout;\n\n  if (itemsChanged) {\n    checkout.lines = checkout.lines.filter(\n      (line) =>\n        line.productTypeSelect !== PRODUCT_TYPESELECT_SERVICE &&\n        line.qty !== '0.00'\n    );\n  }\n\n  return checkout;\n}\n\nfunction handleReturnDataFromResponse(res) {\n  return res && res.data;\n}\n\nfunction handleTransformDataResponse(res, transform) {\n  if (res.data) {\n    res.data = transform(res.data);\n  }\n  return res;\n}\n\nfunction handleAddDisplayAddress(address) {\n  return Object.assign({}, address, {\n    displayAddress: getDisplayAddress(address),\n  });\n}\n\nfunction handleTransformProductsInformation(res) {\n  const transform = (products) => products.map(handleProductInformation);\n  return handleTransformDataResponse(res, transform);\n}\n\nfunction handleTransformCardsInformation(res) {\n  const transform = (cards) => cards.map(handleCardInformation);\n  return handleTransformDataResponse(res, transform);\n}\n\nfunction handleTransformInverseMapAddress(res) {\n  const transform = (addresses) => addresses.map(getInverseMappedAddress);\n  return handleTransformDataResponse(res, transform);\n}\n\nfunction handleTransformDisplayAddress(res) {\n  const transform = (addresses) => addresses.map(handleAddDisplayAddress);\n  return handleTransformDataResponse(res, transform);\n}\n\nfunction manageQueryString(url, query) {\n  if (query) {\n    return url + '?' + getQueryString(query);\n  } else {\n    return url;\n  }\n}\n\nfunction fetchProducts(query) {\n  const URL = manageQueryString(`/ws/portal/products`, query);\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then(handleUndefinedDataResponse)\n    .then(handleTransformProductsInformation)\n    .catch(handlePaginationTypeDataResponse);\n}\n\nfunction fetchProduct(productId) {\n  const URL = `/ws/portal/products/${productId}`;\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then((result) => handleUndefinedDataResponse(result, {}))\n    .then(handleReturnDataFromResponse)\n    .then(handleProductInformation)\n    .catch(handleEmptyObjectDataReponse);\n}\n\nfunction fetchCategories() {\n  const URL = `/ws/portal/categories`;\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then(handleUndefinedDataResponse)\n    .then(handleReturnDataFromResponse)\n    .catch(handleEmptyArrayDataResponse);\n}\n\nfunction fetchCategoryProducts(categoryId, query) {\n  const URL = manageQueryString(\n    `/ws/portal/categories/${categoryId}/products`,\n    query\n  );\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then(handleUndefinedDataResponse)\n    .then(handleTransformProductsInformation)\n    .catch(handlePaginationTypeDataResponse);\n}\n\nfunction fetchAddresses() {\n  const URL = `/ws/portal/addresses`;\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then(handleUndefinedDataResponse)\n    .then(handleTransformInverseMapAddress)\n    .then(handleTransformDisplayAddress)\n    .catch(handlePaginationTypeDataResponse);\n}\n\nfunction fetchAddress(addressId) {\n  const URL = `/ws/portal/addresses/${addressId}`;\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse)\n    .then(getInverseMappedAddress);\n}\n\nfunction getMappedAddress(address) {\n  return {\n    addressL4: address.address,\n    addressL2: address.addressComplement,\n    zip: address.zipCode,\n    cityId: address.city ? address.city.id : null,\n    id: address.id,\n    addressL7CountryId: address.country,\n  };\n}\n\nfunction getInverseMappedAddress(address) {\n  const { city, addressL7Country } = address;\n  return {\n    address: address.addressL4,\n    addressComplement: address.addressL2,\n    zipCode: address.zip,\n    city: city && handleCityInformation(city),\n    id: address.id,\n    country:\n      address.addressL7CountryId || (addressL7Country && addressL7Country.id),\n    cityName: (city && city.name) || '',\n    countryName: (addressL7Country && addressL7Country.name) || '',\n  };\n}\n\nfunction addAddress(address) {\n  const URL = '/ws/portal/addresses';\n  return RestService.post(URL, getMappedAddress(address))\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse);\n}\n\nfunction updateAddress(addressId, address) {\n  const URL = `/ws/portal/addresses/${addressId}`;\n  return RestService.post(URL, getMappedAddress(address))\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse);\n}\n\nfunction deleteAddress(addressId) {\n  const URL = `/ws/portal/addresses/${addressId}`;\n  return RestService.delete(URL);\n}\n\nfunction handleCityInformation(city = {}) {\n  return {\n    id: city.id,\n    label: city.name,\n    value: city.id,\n    zipCode: city.zip,\n    country: city.country && city.country.id,\n  };\n}\n\nfunction handleTransformCities(res) {\n  const transform = (cities) => cities.map(handleCityInformation);\n  return handleTransformDataResponse(res, transform);\n}\n\nfunction fetchCities({ search, countryId } = {}, query) {\n  const searchInput = search ? `&searchInput=${search}` : '';\n  const URL =\n    manageQueryString(\n      countryId\n        ? `/ws/portal/countries/${countryId}/cities`\n        : '/ws/portal/cities',\n      query\n    ) + searchInput;\n  return RestService.get(URL).then(handleResponse).then(handleTransformCities);\n}\n\nfunction fetchCountries() {\n  const URL = '/ws/portal/countries';\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then(handleUndefinedDataResponse)\n    .then(handleReturnDataFromResponse)\n    .catch(handleEmptyArrayDataResponse);\n}\n\nfunction checkCart(cart) {\n  const payload = {\n    cart: Object.keys(cart).map((productId) => ({\n      productId: Number(productId),\n      quantity: cart[productId],\n    })),\n  };\n\n  const URL = '/ws/portal/cart/check-cart';\n\n  return RestService.post(URL, payload)\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse)\n    .then(handleCheckoutInformation)\n    .then(handleCheckoutItemChange)\n    .catch(handleEmptyObjectDataReponse);\n}\n\nfunction createCheckoutOrderData(data) {\n  const { deliveryAddress, invoicingAddress, cart } = data;\n\n  const orderData = {\n    deliveryAddressId: deliveryAddress.id,\n    mainInvoicingAddressId: invoicingAddress.id,\n    cart: Object.keys(cart).reduce((_cart, productId) => {\n      _cart.push({ productId: Number(productId), quantity: cart[productId] });\n      return _cart;\n    }, []),\n  };\n\n  return orderData;\n}\n\nfunction checkoutPaypal(data) {\n  const { paypalPaymentData, orderData } = data;\n\n  const paypalOrderId = paypalPaymentData.id;\n\n  const URL = '/ws/portal/cart/checkout/paypal';\n\n  const _orderData = createCheckoutOrderData(orderData);\n\n  return RestService.post(URL, {\n    paypalOrderId,\n    orderData: _orderData,\n  })\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse);\n}\n\nfunction checkoutPaymentCard(data) {\n  const { cardId, orderData } = data;\n\n  const URL = '/ws/portal/cart/checkout/stripe';\n\n  const _orderData = createCheckoutOrderData(orderData);\n\n  const payload = {\n    orderData: _orderData,\n  };\n\n  if (cardId) {\n    payload.cardId = cardId;\n  }\n\n  return RestService.post(URL, payload)\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse);\n}\n\nfunction handleCardInformation(card) {\n  const { expiry = '', brand } = card;\n  const expiryMonth = expiry.slice(0, expiry.length - 2);\n  const expiryYear = expiry.slice(expiry.length - 2);\n  const expiryDisplay = `${expiryMonth}/${expiryYear}`;\n\n  let { cardNumber = '' } = card;\n  cardNumber = String(cardNumber);\n  const last4 = cardNumber && cardNumber.slice(cardNumber.length - 4);\n\n  return {\n    ...card,\n    expiryDisplay,\n    last4,\n    brand: brand || '',\n  };\n}\n\nfunction fetchPaymentCards() {\n  const URL = '/ws/portal/payment-cards';\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then(handleUndefinedDataResponse)\n    .then(handleTransformCardsInformation)\n    .catch(handlePaginationTypeDataResponse);\n}\n\nfunction fetchPaymentCard(cardId) {\n  const URL = `/ws/portal/payment-cards/${cardId}`;\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse)\n    .then(handleCardInformation);\n}\n\nfunction addPaymentCard(card) {\n  const URL = '/ws/portal/payment-cards';\n  return RestService.post(URL, card).then(handleResponse);\n}\n\nfunction updatePaymentCard(cardId, card) {\n  const URL = `/ws/portal/payment-cards/${cardId}`;\n  return RestService.post(URL, card).then(handleResponse);\n}\n\nfunction deletePaymentCard(cardId) {\n  const URL = `/ws/portal/payment-cards/${cardId}`;\n  return RestService.delete(URL).then((res) => {\n    if (res.status === -1) {\n      throw new Error(res && res.message);\n    }\n  });\n}\n\nfunction fetchDefaultPaymentCard() {\n  const URL = '/ws/portal/payment-cards/default';\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse);\n}\n\nfunction updateDefaultPaymentCard(cardId) {\n  const URL = `/ws/portal/payment-cards/default/${cardId}`;\n  return RestService.post(URL).then(handleResponse);\n}\n\nfunction fetchPaypalMerchantId() {\n  const URL = '/ws/portal/config/merchant-id';\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse)\n    .catch(handleEmptyObjectDataReponse);\n}\n\nfunction fetchTranslations(data) {\n  const URL = '/ws/portal/translate';\n  return RestService.post(URL, data)\n    .then((result) => {\n      if (!(result && result.status === 0)) {\n        result.data = [];\n      }\n\n      const transform = (arr) =>\n        arr.reduce((acc, value) => {\n          acc[value.key] = value.message;\n          return acc;\n        }, {});\n\n      const { data } = result;\n      return Array.isArray(data) ? transform(data) : {};\n    })\n    .catch(() => {\n      return {};\n    });\n}\n\nfunction checkoutPaybox(data, redirectURL = window.location.href) {\n  const { orderData } = data;\n  const URL = '/ws/portal/cart/checkout/paybox';\n  const _orderData = createCheckoutOrderData(orderData);\n\n  const payload = {\n    orderData: _orderData,\n    successURL: redirectURL + '/success',\n    failureURL: redirectURL + '/failure',\n  };\n\n  return RestService.post(URL, payload)\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse);\n}\n\nfunction fetchConfiguration() {\n  return RestService.get(`/ws/portal/config`)\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse)\n    .then(\n      ({\n        isQuotationRequestActive,\n        isDataPolicyRequired,\n        dataPolicyMetaFile,\n        isReturnPolicyRequired,\n        returnPolicyMetaFile,\n        isTermRequired,\n        termMetaFile,\n        isZipOnLeftOnEshop,\n        isAllowOutOfStock,\n      }) => {\n        return {\n          isQuotationRequestActive,\n          isDataPolicyRequired,\n          dataPolicyMetaFile,\n          isReturnPolicyRequired,\n          returnPolicyMetaFile,\n          isTermRequired,\n          termMetaFile,\n          isZipOnLeftOnEshop,\n          isAllowOutOfStock,\n        };\n      }\n    )\n    .catch(() => ({ isQuotationRequestActive: false }));\n}\n\nfunction checkoutQuotation(data) {\n  const { orderData } = data;\n\n  const URL = '/ws/portal/cart/checkout/quotation';\n\n  const _orderData = createCheckoutOrderData(orderData);\n\n  const payload = {\n    orderData: _orderData,\n  };\n\n  return RestService.post(URL, payload)\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse);\n}\n\nfunction fetchPaymentCardConfiguration() {\n  const URL = '/ws/portal/config/is-card-active';\n\n  return RestService.get(URL)\n    .then(handleResponse)\n    .then(handleReturnDataFromResponse)\n    .then(({ isStripeActivated: isPaymentCardActivated }) => ({\n      isPaymentCardActivated,\n    }));\n}\n\nfunction fetchInfo() {\n  return RestService.checkInfo();\n}\n\nexport default {\n  fetchProducts,\n  fetchProduct,\n  fetchCategories,\n  fetchCategoryProducts,\n  fetchAddresses,\n  fetchAddress,\n  addAddress,\n  deleteAddress,\n  updateAddress,\n  fetchCities,\n  fetchCountries,\n  checkCart,\n  checkoutPaypal,\n  checkoutPaybox,\n  checkoutPaymentCard,\n  checkoutQuotation,\n  fetchPaymentCards,\n  fetchPaymentCard,\n  addPaymentCard,\n  updatePaymentCard,\n  deletePaymentCard,\n  fetchPaymentCardConfiguration,\n  fetchDefaultPaymentCard,\n  updateDefaultPaymentCard,\n  fetchPaypalMerchantId,\n  fetchTranslations,\n  fetchConfiguration,\n  fetchInfo,\n  getMetafileURL,\n};\n","import React, { useContext } from 'react';\n\nimport Loader from '../components/Loader';\nimport EshopAPI from '../EshopAPI';\n\nconst SessionContext = React.createContext();\n\nexport function SessionProvider({ children }) {\n  const [loading, setLoading] = React.useState(true);\n  const [data, setData] = React.useState({ app: {}, user: {} });\n\n  React.useEffect(() => {\n    EshopAPI.fetchInfo()\n      .then((info) => {\n        setData({ ...info });\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  return (\n    <SessionContext.Provider value={data}>{children}</SessionContext.Provider>\n  );\n}\n\nexport function useSession() {\n  return useContext(SessionContext);\n}\n\nexport default SessionProvider;\n","import React, {\n  useCallback,\n  useState,\n  useMemo,\n  useEffect,\n  useContext,\n} from 'react';\n\nimport { useSession } from './SessionProvider';\nimport Loader from '../components/Loader';\nimport EshopAPI from '../EshopAPI';\nimport globals from '../../services/globals';\n\nexport const LOCAL_STORAGE_CART = 'cart';\nexport const LOCAL_STORAGE_ADDRESS = 'address';\nexport const LOCAL_STORAGE_INVOICING_ADDRESS = 'invoicing';\nexport const LOCAL_STORAGE_DELIVERY_ADDRESS = 'delivery';\n\nfunction getLocalStorageItem(key, defaultValue = {}) {\n  try {\n    return JSON.parse(localStorage.getItem(key)) || defaultValue;\n  } catch (err) {\n    return defaultValue;\n  }\n}\n\nfunction setLocalStorageItem(key, value) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\n\nfunction getLocalStorageCart(userId) {\n  return getLocalStorageItem(`${LOCAL_STORAGE_CART}_${userId}`);\n}\n\nfunction setLocalStorageCart(cart, userId) {\n  setLocalStorageItem(`${LOCAL_STORAGE_CART}_${userId}`, cart);\n}\n\nfunction getLocalStorageAddress(userId) {\n  return getLocalStorageItem(`${LOCAL_STORAGE_ADDRESS}_${userId}`);\n}\n\nfunction setLocalStorageAddress(address, userId) {\n  setLocalStorageItem(`${LOCAL_STORAGE_ADDRESS}_${userId}`, address);\n}\n\nconst EshopContext = React.createContext();\n\nfunction EshopProvider(props) {\n  const { children } = props;\n  const {\n    user: { id: userId },\n  } = useSession();\n\n  const [{ cart, config, checkoutAddresses }, setStore] = useState({\n    cart: {},\n    config: {},\n    checkoutAddresses: {},\n  });\n\n  const [loading, setLoading] = useState(true);\n\n  const setCart = useCallback((cart) => {\n    setStore((store) => ({ ...store, cart }));\n  }, []);\n\n  const setCheckoutAddresses = useCallback((checkoutAddresses) => {\n    setStore((store) => ({ ...store, checkoutAddresses }));\n  }, []);\n\n  const setConfig = useCallback(\n    (config) => setStore((store) => ({ ...store, config })),\n    []\n  );\n\n  const clearCart = useCallback(() => {\n    setCart({});\n  }, [setCart]);\n\n  const setItem = useCallback((productId, qty) => {\n    setStore((store) => {\n      return { ...store, cart: { ...store.cart, [productId]: qty } };\n    });\n  }, []);\n\n  const setInvoicingAddress = useCallback((addressId) => {\n    setStore((store) => {\n      return {\n        ...store,\n        checkoutAddresses: {\n          ...store.checkoutAddresses,\n          [LOCAL_STORAGE_INVOICING_ADDRESS]: addressId,\n        },\n      };\n    });\n  }, []);\n\n  const setDeliveryAddress = useCallback((addressId) => {\n    setStore((store) => {\n      return {\n        ...store,\n        checkoutAddresses: {\n          ...store.checkoutAddresses,\n          [LOCAL_STORAGE_DELIVERY_ADDRESS]: addressId,\n        },\n      };\n    });\n  }, []);\n\n  const clearItem = useCallback((productId) => {\n    setStore((store) => {\n      const cart = { ...store.cart };\n      delete cart[productId];\n      return { ...store, cart };\n    });\n  }, []);\n\n  useEffect(() => {\n    if (!userId) return;\n\n    const cart = getLocalStorageCart(userId);\n    const checkoutAddresses = getLocalStorageAddress(userId);\n\n    if (cart && Object.keys(cart).length > 0) {\n      setCart(cart); // Validate for quantity if required\n    } else {\n      setCart({});\n    }\n\n    if (checkoutAddresses && Object.keys(checkoutAddresses).length > 0) {\n      setCheckoutAddresses(checkoutAddresses);\n    } else {\n      setCheckoutAddresses({});\n    }\n  }, [userId, setCart, setCheckoutAddresses]);\n\n  useEffect(() => {\n    if (userId && cart) {\n      setLocalStorageCart(cart, userId);\n    }\n  }, [userId, cart]);\n\n  useEffect(() => {\n    if (userId && checkoutAddresses && Object.keys(checkoutAddresses).length) {\n      setLocalStorageAddress(checkoutAddresses, userId);\n    }\n  }, [userId, checkoutAddresses]);\n\n  const fetchConfiguration = useCallback(() => {\n    EshopAPI.fetchConfiguration()\n      .then((config) => {\n        globals.set('config', config);\n        setConfig(config);\n      })\n      .finally(() => setLoading(false));\n  }, [setConfig]);\n\n  useEffect(() => {\n    fetchConfiguration();\n  }, [fetchConfiguration]);\n\n  const state = useMemo(\n    () => ({\n      cart,\n      checkoutAddresses,\n      config,\n      setCart,\n      clearCart,\n      setConfig,\n      setItem,\n      clearItem,\n      setInvoicingAddress,\n      setDeliveryAddress,\n    }),\n    [\n      cart,\n      checkoutAddresses,\n      config,\n      setCart,\n      clearCart,\n      setConfig,\n      setItem,\n      clearItem,\n      setInvoicingAddress,\n      setDeliveryAddress,\n    ]\n  );\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  return (\n    <EshopContext.Provider value={state}>{children}</EshopContext.Provider>\n  );\n}\n\nexport function useEshop() {\n  return useContext(EshopContext);\n}\n\nexport default EshopProvider;\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  divider: {\n    borderColor: theme.palette.secondary.main,\n  },\n}));\n\nfunction Divider(props) {\n  const { className, ...rest } = props;\n\n  const classes = useStyles();\n\n  return <hr className={clsx(classes.divider, className)} {...rest} />;\n}\n\nexport default Divider;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Divider from './Divider';\n\nconst useStyles = makeStyles((theme) => ({\n  row: {\n    display: 'flex',\n    marginBottom: theme.spacing(0.5),\n    justifyContent: 'space-between',\n  },\n}));\n\nfunction PriceSummary(props) {\n  const {\n    total,\n    totalLabel,\n    totalWithoutTax,\n    totalDiscount,\n    totalWithoutTaxLabel,\n    totalTax,\n    totalTaxLabel,\n    totalDiscountLabel,\n    divider,\n    className,\n  } = props;\n\n  const classes = useStyles();\n\n  return (\n    <div className={className}>\n      {divider && <Divider />}\n      <div className={classes.row}>\n        <Typography>{totalWithoutTaxLabel}</Typography>\n        <Typography>{totalWithoutTax}</Typography>\n      </div>\n      <div className={classes.row}>\n        <Typography>{totalDiscountLabel}</Typography>\n        <Typography>{totalDiscount}</Typography>\n      </div>\n      <div className={classes.row}>\n        <Typography>{totalTaxLabel}</Typography>\n        <Typography>{totalTax}</Typography>\n      </div>\n      {divider && <Divider />}\n      <div className={classes.row}>\n        <Typography>\n          <b>{totalLabel}</b>\n        </Typography>\n        <Typography>\n          <b>{total}</b>\n        </Typography>\n      </div>\n    </div>\n  );\n}\n\nPriceSummary.defaultProps = {\n  divider: true,\n  total: '0.00',\n  totalTax: '0.00',\n  totalWithoutTax: '0.00',\n  totalDiscount: '0.00',\n  totalLabel: 'Total',\n  totalTaxLabel: 'Total Tax',\n  totalWithoutTaxLabel: 'Total Without Tax',\n  totalDiscountLabel: 'Total Discount',\n};\n\nexport default PriceSummary;\n","import Paper from '@material-ui/core/Paper';\nimport { withStyles } from '@material-ui/core/styles';\n\nexport default withStyles(() => ({\n  root: {\n    position: 'relative',\n    width: '100%',\n    overflow: 'hidden',\n    backgroundColor: '#ffffff',\n    borderRadius: 4,\n  },\n  elevation1: {\n    boxShadow: `0px 0px 30px rgba(0,0,0,0.15)`,\n  },\n}))(Paper);\n","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles, fade } from '@material-ui/core/styles';\n\nconst useInputStyles = makeStyles((theme) => ({\n  root: {\n    border: '1px solid #E2E2E1',\n    overflow: 'hidden',\n    borderRadius: 4,\n    backgroundColor: 'white',\n    transition: theme.transitions.create(['border-color', 'box-shadow']),\n    '&$disabled': {\n      backgroundColor: '#FCFCFB',\n    },\n    '&:hover': {\n      backgroundColor: '#FFFFFF',\n    },\n    '&$focused': {\n      backgroundColor: '#FFFFFF',\n      boxShadow: `${fade(theme.palette.secondary.main, 0.25)} 0 0 0 1px`,\n      borderColor: theme.palette.secondary.main,\n    },\n  },\n  disabled: {},\n  focused: {},\n}));\n\nconst useInputLabelStyles = makeStyles((theme) => ({\n  root: {\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    maxWidth: '100%',\n    '&$focused': {\n      color: theme.palette.secondary.main,\n    },\n    '&$filled': {\n      transition: theme.transitions.create(['color']),\n      '&$focused': {\n        color: theme.palette.secondary.main,\n      },\n    },\n  },\n  error: {},\n  asterisk: {},\n  focused: {},\n  filled: {},\n}));\n\nconst Input = React.forwardRef((props, ref) => {\n  const { error, readOnly, InputProps,...rest } = props;\n  const inputClasses = useInputStyles();\n  const inputLabelClasses = useInputLabelStyles();\n\n  return (\n    <TextField\n      margin=\"dense\"\n      ref={ref}\n      variant=\"filled\"\n      fullWidth\n      {...rest}\n      InputLabelProps={{ shrink: true, classes: inputLabelClasses }}\n      InputProps={{\n        readOnly,\n        disableUnderline: true,\n        classes: inputClasses,\n        ...(InputProps || {}),\n      }}\n      error={Boolean(error)}\n      helperText={error}\n    />\n  );\n});\n\nexport default Input;\n","import React, { useCallback, useRef, useState } from 'react';\nimport Box from '@material-ui/core/Box';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nimport Input from './Input';\nimport Loader from './Loader';\n\nconst useSelectStyles = makeStyles(() => ({\n  root: {\n    '&:focus': {\n      backgroundColor: 'white',\n    },\n  },\n}));\n\nconst useMenuStyles = makeStyles(() => ({\n  paper: {\n    maxHeight: 300,\n  },\n}));\n\nconst useMenuItemStyles = makeStyles((theme) => ({\n  root: {\n    '&$selected': {\n      color: theme.palette.secondary.main,\n      backgroundColor: theme.palette.secondary.light,\n    },\n    '&:hover': {\n      color: theme.palette.secondary.main,\n      backgroundColor: theme.palette.secondary.light,\n    },\n  },\n  selected: {},\n}));\n\nconst usePopoverClasses = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  paper: {\n    width: '90%',\n    maxWidth: 400,\n  },\n}));\n\nfunction Select(props) {\n  const {\n    options,\n    onLoadMore,\n    showLoadingOption,\n    onOpen,\n    onClose,\n    ...rest\n  } = props;\n\n  const selectRef = useRef();\n  const [anchorPosition, setAnchorPosition] = useState(null);\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n  const selectClasses = useSelectStyles();\n  const menuClasses = useMenuStyles();\n  const menuItemClasses = useMenuItemStyles();\n  const popoverClasses = usePopoverClasses();\n\n  const handleOpen = useCallback(\n    (event) => {\n      if (onLoadMore) {\n        const { top, left } = selectRef?.current?.getBoundingClientRect();\n        setAnchorPosition({ top, left });\n      }\n      if (onOpen) {\n        onOpen(event);\n      }\n    },\n    [onLoadMore, onOpen]\n  );\n\n  const handleClose = useCallback(\n    (event) => {\n      if (onLoadMore) {\n        setAnchorPosition(null);\n      }\n      if (onClose) {\n        onClose(event);\n      }\n    },\n    [onLoadMore, onClose]\n  );\n  return (\n    <Input\n      select\n      ref={selectRef}\n      SelectProps={{\n        classes: selectClasses,\n        MenuProps: {\n          classes: menuClasses,\n          ...(fullScreen\n            ? {\n                anchorReference: 'none',\n                PopoverClasses: popoverClasses,\n                BackdropProps: { invisible: false },\n              }\n            : {\n                ...(anchorPosition\n                  ? { anchorReference: 'anchorPosition', anchorPosition }\n                  : {}),\n              }),\n          onScroll: (event) => {\n            const { scrollTop, scrollHeight, clientHeight } = event.target;\n            const atScrollEnd = scrollTop === scrollHeight - clientHeight;\n            if (atScrollEnd && onLoadMore) {\n              onLoadMore();\n            }\n          },\n        },\n        onOpen: handleOpen,\n        onClose: handleClose,\n      }}\n      {...rest}\n    >\n      {options.map((option) => (\n        <MenuItem\n          key={option.value}\n          value={option.value}\n          classes={menuItemClasses}\n        >\n          {option.label}\n        </MenuItem>\n      ))}\n      {showLoadingOption && (\n        <MenuItem disabled>\n          <Box width=\"100%\">\n            <Loader />\n          </Box>\n        </MenuItem>\n      )}\n    </Input>\n  );\n}\n\nSelect.defaultProps = {\n  options: [],\n};\n\nexport default Select;\n","import React, { useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Input from './Input';\nimport Select from './Select';\n\nconst useStyles = makeStyles(() => ({\n  input: {\n    '&[type=number]': {\n      MozAppearance: 'textfield',\n      '&::-webkit-outer-spin-button, &::-webkit-inner-spin-button': {\n        WebkitAppearance: 'none',\n        margin: 0,\n      },\n    },\n  },\n}));\n\nconst QuantityInput = ({\n  maxItems,\n  moreLabel,\n  name,\n  onChange,\n  value,\n  ...props\n}) => {\n  const [moreThanMax, setMoreThanMax] = React.useState(value > maxItems);\n  const inputRef = React.useRef();\n  const classes = useStyles();\n\n  const isDecimal = useMemo(() => value % 1 !== 0, [value]);\n\n  React.useEffect(() => {\n    if (moreThanMax) {\n      inputRef.current.focus();\n    }\n  }, [moreThanMax]);\n\n  const handleMoreThanMax = React.useCallback(() => {\n    setMoreThanMax(true);\n  }, []);\n\n  const handleChange = React.useCallback(\n    (e) => {\n      if (e.target.value === 'more') {\n        handleMoreThanMax();\n        onChange({ target: { value: maxItems, name } });\n      } else {\n        onChange(e);\n        if (!moreThanMax) {\n          // remove focus to delay selection lag\n          document.activeElement &&\n            document.activeElement.blur &&\n            document.activeElement.blur();\n        }\n      }\n    },\n    [handleMoreThanMax, moreThanMax, onChange, maxItems, name]\n  );\n\n  if (moreThanMax || isDecimal) {\n    return (\n      <Input\n        ref={inputRef}\n        // InputProps={{\n        inputProps={{\n          className: classes.input,\n        }}\n        // }}\n        onChange={handleChange}\n        name={name}\n        value={value}\n        {...props}\n        type=\"number\"\n        min={1}\n      />\n    );\n  } else {\n    return (\n      <Select\n        name={name}\n        options={[\n          ...[...Array(maxItems).keys()].map((i) => ({\n            value: i + 1,\n            label: i + 1,\n          })),\n          { value: 'more', label: moreLabel },\n        ]}\n        onChange={handleChange}\n        value={value}\n        {...props}\n      />\n    );\n  }\n};\n\nQuantityInput.defaultProps = {\n  maxItems: 10,\n  moreLabel: 'More',\n};\n\nexport default QuantityInput;\n","import React from 'react';\nimport i18next from 'i18next';\nimport {\n  initReactI18next,\n  I18nextProvider,\n  useTranslation as i18nextUseTranslation,\n} from 'react-i18next';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport Backend from 'i18next-http-backend';\n\nimport en from '../assets/locales/en/translations.json';\nimport fr from '../assets/locales/fr/translations.json';\nimport EshopAPI from '../EshopAPI';\n\nconst translations = {\n  en,\n  fr,\n};\n\nconst i18n = i18next.createInstance();\nconst lng = navigator.language.includes('fr') ? 'fr' : 'en';\n\ni18n\n  .use(initReactI18next)\n  .use(Backend)\n  .use(LanguageDetector)\n  .init({\n    lng,\n    fallbackLng: 'en',\n    interpolation: {\n      escapeValue: false,\n    },\n    backend: {\n      request: (options, url, payload, callback) => {\n        const getLanguageFromURL = (url) => {\n          const regexURL = /\\/locales\\/(?<lang>\\w+)\\/translation.json/gm;\n          return regexURL.exec(url).groups.lang || 'en';\n        };\n\n        const lang = getLanguageFromURL(url);\n        const defaultTranslations = translations[lang] || translations.en;\n\n        EshopAPI.fetchTranslations({\n          keys: Object.keys(defaultTranslations),\n          lang,\n        }).then((result) => {\n\n          const removeEmptyTranslation = (obj = {}) =>\n            Object.keys(obj).reduce((acc, key) => {\n              const value = obj[key];\n              if (value) {\n                acc[key] = value;\n              }\n              return acc;\n            }, {});\n\n          const data = JSON.stringify(\n            Object.assign(\n              {},\n              defaultTranslations,\n              removeEmptyTranslation(result)\n            )\n          );\n\n          callback(null, {\n            status: true,\n            data,\n          });\n        });\n      },\n    },\n    keySeparator: false,\n  });\n\nfunction TranslationProvider({ children }) {\n  return <I18nextProvider i18n={i18n}>{children}</I18nextProvider>;\n}\n\nexport default TranslationProvider;\n\nexport const useTranslation = i18nextUseTranslation;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\n\nimport { useTranslation } from '../providers/TranslationProvider';\n\nfunction ConfirmationDialog(props) {\n  const { t } = useTranslation();\n\n  const { open, onClose, onConfirm, onCancel, children, title } = props;\n\n  return (\n    <Dialog open={open} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>{children}</DialogContent>\n      <DialogActions>\n        <Button variant=\"outlined\" onClick={onCancel || onClose}>\n          {t('Cancel')}\n        </Button>\n        <Button onClick={onConfirm}>{t('Confirm')}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nConfirmationDialog.defaultProps = {\n  title: 'Confirmation Dialog',\n  open: false,\n  onClose: () => {},\n  onConfirm: () => {},\n};\n\nexport default ConfirmationDialog;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\n\nimport ConfirmationDialog from './ConfirmationDialog';\n\nfunction ConfirmationDialogButton(props) {\n  const { ButtonProps, DialogProps, onConfirm } = props;\n\n  const [dialogOpen, setDialogOpen] = React.useState(false);\n\n  const handleOpenDialog = React.useCallback(() => {\n    setDialogOpen(true);\n  }, []);\n\n  const handleCloseDialog = React.useCallback(() => {\n    setDialogOpen(false);\n  }, []);\n\n  const handleConfirm = React.useCallback(() => {\n    handleCloseDialog();\n    onConfirm && onConfirm();\n  }, [onConfirm, handleCloseDialog]);\n\n  return (\n    <>\n      <Button\n        className={ButtonProps.className}\n        variant={ButtonProps.variant}\n        onClick={handleOpenDialog}\n        disabled={ButtonProps.disabled}\n      >\n        {ButtonProps.label}\n      </Button>\n      <ConfirmationDialog\n        open={dialogOpen}\n        onClose={handleCloseDialog}\n        onConfirm={handleConfirm}\n        title={DialogProps.title}\n        children={DialogProps.children}\n      ></ConfirmationDialog>\n    </>\n  );\n}\n\nConfirmationDialogButton.defaultProps = {\n  ButtonProps: {},\n  DialogProps: {},\n};\n\nexport default ConfirmationDialogButton;\n","import React from 'react';\nimport Divider from './Divider';\nimport PriceSummary from './PriceSummary';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { PayPalButton } from 'react-paypal-button-v2';\nimport classnames from 'classnames';\n\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport Paper from './Paper';\nimport QuantityInput from './QuantityInput';\nimport Loader from './Loader';\nimport Select from './Select';\nimport ConfirmationDialog from './ConfirmationDialog';\nimport ConfirmationDialogButton from './ConfirmationDialogButton';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nfunction RequestQuotationButton(props) {\n  const { disabled, onClick } = props;\n\n  const { t } = useTranslation();\n  return (\n    <ConfirmationDialogButton\n      ButtonProps={{\n        disabled,\n        label: t('Request quotation'),\n      }}\n      DialogProps={{\n        title: t('Request quotation'),\n        children: t('Confirm quotation request'),\n      }}\n      onConfirm={onClick}\n    />\n  );\n}\n\nRequestQuotationButton.defaultProps = {\n  disabled: false,\n  onClick: () => {},\n};\n\nfunction ConfirmOrderButton(props) {\n  const { disabled, onClick } = props;\n\n  const { t } = useTranslation();\n  return (\n    <ConfirmationDialogButton\n      ButtonProps={{\n        disabled,\n        label: t('Confirm order'),\n      }}\n      DialogProps={{\n        title: t('Confirm order'),\n        children: t('Confirm order content'),\n      }}\n      onConfirm={onClick}\n    />\n  );\n}\n\nConfirmOrderButton.defaultProps = {\n  disabled: false,\n  onClick: () => {},\n};\n\nconst usePayboxButtonStyles = makeStyles({\n  button: {\n    width: 150,\n  },\n});\n\nfunction PayboxButton(props) {\n  const { disabled, onClick } = props;\n\n  const { t } = useTranslation();\n  const classes = usePayboxButtonStyles();\n\n  return (\n    <Button\n      className={classes.button}\n      disabled={disabled}\n      onClick={onClick}\n      variant=\"outlined\"\n    >\n      {t('Paybox')}\n    </Button>\n  );\n}\n\nPayboxButton.defaultProps = {\n  disabled: false,\n  onClick: () => {},\n};\n\nfunction PaymentCardButton(props) {\n  const { disabled, onClick } = props;\n  const { t } = useTranslation();\n\n  return (\n    <ConfirmationDialogButton\n      ButtonProps={{\n        disabled,\n        label: t('Pay using card'),\n      }}\n      DialogProps={{\n        title: t('Pay using card'),\n        children: t('Confirm order content'),\n      }}\n      onConfirm={onClick}\n    />\n  );\n}\n\nPaymentCardButton.defaultProps = {\n  showButton: false,\n  disabled: false,\n  onClick: () => {},\n};\n\nconst useCheckoutPriceSummaryStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(2),\n  },\n  actionContainer: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  spaceBetween: {\n    justifyContent: 'space-between',\n  },\n  termWrapper: {\n    display: 'flex',\n    alignItems: 'flex-start',\n    flexDirection: 'column',\n    marginTop: theme.spacing(2),\n  },\n  term: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n  },\n  termLink: {\n    textDecoration: 'none',\n    color: theme.palette.secondary.main,\n  },\n  actionWrapper: {\n    display: 'flex',\n    alignItems: 'center',\n    flexDirection: 'column',\n    marginTop: theme.spacing(2),\n  },\n  actionTitle: {\n    marginBottom: theme.spacing(),\n  },\n  action: {\n    marginBottom: theme.spacing(),\n  },\n}));\n\nfunction CheckoutSummary(props) {\n  const {\n    total,\n    totalTax,\n    totalDiscount,\n    totalWithoutTax,\n    message,\n    PaypalButtonProps,\n    PayboxButtonProps,\n    RequestQuotationButtonProps,\n    PaymentCardButtonProps,\n    ConfirmOrderButtonProps,\n    Terms = [],\n  } = props;\n\n  const { t } = useTranslation();\n  const classes = useCheckoutPriceSummaryStyles();\n\n  const showTerms = Terms.some((term) => term.show);\n\n  return (\n    <Paper className={classes.paper}>\n      <Typography variant=\"h5\">{t('Order summary')}</Typography>\n      <PriceSummary\n        total={total}\n        totalTax={totalTax}\n        totalDiscount={totalDiscount}\n        totalWithoutTax={totalWithoutTax}\n        totalLabel={t('Total')}\n        totalTaxLabel={t('Total tax')}\n        totalWithoutTaxLabel={t('Total without tax')}\n        totalDiscountLabel={t('Total discount')}\n      />\n      <div\n        className={classnames(classes.actionContainer, {\n          [classes.spaceBetween]: showTerms,\n        })}\n      >\n        {showTerms && (\n          <div className={classes.termWrapper}>\n            {Terms.filter((term) => term.required && term.show).map(\n              (term, i) => {\n                return (\n                  <div className={classes.term} key={i}>\n                    <Checkbox\n                      checked={term.checked}\n                      onChange={(e) => term.setChecked(e.target.checked)}\n                    />\n                    <a\n                      color=\"secondary\"\n                      href={term.fileURL}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className={classes.termLink}\n                    >\n                      {t(term.label)}\n                    </a>\n                  </div>\n                );\n              }\n            )}\n          </div>\n        )}\n        <div className={classes.actionWrapper}>\n          {RequestQuotationButtonProps.showButton && (\n            <div className={classes.action}>\n              <RequestQuotationButton {...RequestQuotationButtonProps} />\n            </div>\n          )}\n          {ConfirmOrderButtonProps.showButton && (\n            <div className={classes.action}>\n              <ConfirmOrderButton {...ConfirmOrderButtonProps} />\n            </div>\n          )}\n          {PaymentCardButtonProps.showButton && (\n            <div className={classes.action}>\n              <PaymentCardButton {...PaymentCardButtonProps} />\n            </div>\n          )}\n          {PayboxButtonProps.showButton && (\n            <div className={classes.action}>\n              <PayboxButton {...PayboxButtonProps} />\n            </div>\n          )}\n          {PaypalButtonProps.showButton && (\n            <div className={classes.action}>\n              <PayPalButton\n                style={{\n                  color: 'blue',\n                  shape: 'pill',\n                  height: 36,\n                }}\n                {...PaypalButtonProps}\n              />\n            </div>\n          )}\n          {message && (\n            <div className={classes.action}>\n              <Typography>{message}</Typography>\n            </div>\n          )}\n        </div>\n      </div>\n    </Paper>\n  );\n}\n\nCheckoutSummary.defaultProps = {\n  message: '',\n  PaypalButtonProps: {},\n  PayboxButtonProps: {},\n  RequestQuotationButtonProps: {},\n  PaymentCardButtonProps: {},\n  ConfirmOrderButtonProps: {},\n};\n\nconst useCheckoutAddressStyles = makeStyles((theme) => ({\n  container: {\n    marginBottom: theme.spacing(4),\n  },\n  header: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: theme.spacing(),\n  },\n  headerAction: {\n    fontSize: '0.7rem',\n  },\n  select: {\n    marginBottom: theme.spacing(),\n  },\n}));\n\nfunction CheckoutAddress(props) {\n  const {\n    deliveryAddresses,\n    invoicingAddresses,\n    invoicingAddress,\n    deliveryAddress,\n    onNewAddress,\n    onDeliveryAddressChange,\n    onInvoicingAddressChange,\n  } = props;\n\n  const { t } = useTranslation();\n\n  const classes = useCheckoutAddressStyles();\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.header}>\n        <Typography variant=\"h5\">{t('Addresses')}</Typography>\n        <Button className={classes.headerAction} onClick={onNewAddress}>\n          {t('New address')}\n        </Button>\n      </div>\n      <Divider />\n      <Grid container spacing={4}>\n        <Grid item xs={12} md={6}>\n          <Select\n            label={t('Invoicing address')}\n            name=\"invoicingAddress\"\n            value={invoicingAddress.id || ''}\n            options={invoicingAddresses}\n            className={classes.select}\n            onChange={onInvoicingAddressChange}\n            required\n          />\n          <Typography variant=\"body2\">\n            {invoicingAddress.displayAddress}\n          </Typography>\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <Select\n            label={t('Delivery address')}\n            name=\"deliveryAddress\"\n            value={deliveryAddress.id || ''}\n            options={deliveryAddresses}\n            className={classes.select}\n            onChange={onDeliveryAddressChange}\n            required\n          />\n          <Typography variant=\"body2\">\n            {deliveryAddress.displayAddress}\n          </Typography>\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n\nCheckoutAddress.defaultProps = {\n  deliveryAddress: {},\n  deliveryAddresses: [],\n  invoicingAddress: {},\n  invoicingAddresses: [],\n  onNewAddress: () => {},\n  onDeliveryAddressChange: () => {},\n  onInvoicingAddressChange: () => {},\n};\n\nfunction CheckoutProductQuantityInput(props) {\n  const { value, onChange, line, ...rest } = props;\n\n  const [qty, setQty] = React.useState(Number(value));\n\n  React.useEffect(() => {\n    if (line.overrideInput) {\n      // Override when available quantity is less than input\n      setQty(Number(value));\n    } else if (qty) {\n      const qtyNumber = Number(qty);\n      if (qtyNumber > 0 && qtyNumber !== Number(value)) {\n        onChange(line.productId, Number(qty));\n      }\n    }\n  }, [qty, value, line, onChange]);\n\n  const handleQtyChange = React.useCallback(({ target: { value } }) => {\n    setQty(value);\n  }, []);\n\n  const handleQtyBlur = React.useCallback(\n    ({ target: { value } }) => {\n      onChange(line.productId, Number(value));\n    },\n    [line, onChange]\n  );\n\n  return (\n    <QuantityInput\n      {...rest}\n      value={qty}\n      onBlur={handleQtyBlur}\n      onChange={handleQtyChange}\n    />\n  );\n}\n\nconst useCheckoutProductLinesStyles = makeStyles((theme) => ({\n  container: {\n    marginBottom: theme.spacing(3),\n  },\n  header: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: theme.spacing(),\n  },\n  headerAction: {\n    fontSize: '0.7rem',\n  },\n  price: {\n    color: theme.palette.secondary.main,\n  },\n}));\n\nfunction CheckoutProductLines(props) {\n  const {\n    lines,\n    onNewProduct,\n    onProductQuantityChange,\n    onProductDelete,\n  } = props;\n\n  const { t } = useTranslation();\n  const classes = useCheckoutProductLinesStyles();\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.header}>\n        <Typography variant=\"h5\">\n          {`${t('Products')} (${lines ? lines.length : 0})`}\n        </Typography>\n        <Button className={classes.headerAction} onClick={onNewProduct}>\n          {t('Add a product')}\n        </Button>\n      </div>\n      <Divider />\n      <Grid container spacing={2}>\n        {lines.map((line, index) => (\n          <Grid item xs={12} key={line.productId}>\n            <Grid container alignItems=\"center\" spacing={2}>\n              <Grid item xs={3}>\n                <CheckoutProductQuantityInput\n                  label={t('Quantity')}\n                  moreLabel={t('More')}\n                  name=\"qty\"\n                  min={1}\n                  value={Number(line.qty)}\n                  line={line}\n                  onChange={onProductQuantityChange}\n                />\n              </Grid>\n              <Grid item xs={5} zeroMinWidth>\n                <Typography noWrap>{line.name}</Typography>\n              </Grid>\n              <Grid item xs={2} zeroMinWidth align=\"right\">\n                <Typography className={classes.price} noWrap>\n                  {line.total}\n                </Typography>\n              </Grid>\n              <Grid item xs={2} align=\"right\">\n                <IconButton onClick={(e) => onProductDelete(e, line)}>\n                  <DeleteIcon />\n                </IconButton>\n              </Grid>\n            </Grid>\n          </Grid>\n        ))}\n        <Grid item xs={12} md={6}></Grid>\n      </Grid>\n    </div>\n  );\n}\n\nCheckoutProductLines.defaultProps = {\n  lines: [],\n  onNewProduct: () => {},\n  onProductDelete: () => {},\n  onProductQuantityChange: () => {},\n};\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    padding: theme.spacing(4),\n    [theme.breakpoints.down('sm')]: {\n      padding: theme.spacing(),\n    },\n  },\n  backdrop: {\n    zIndex: theme.zIndex.appBar + 1,\n  },\n}));\n\nfunction Checkout(props) {\n  const {\n    total,\n    totalTax,\n    totalDiscount,\n    totalWithoutTax,\n    productLines,\n    deliveryAddress,\n    deliveryAddresses,\n    invoicingAddress,\n    invoicingAddresses,\n    checkingOut,\n    summaryMessage,\n    PaypalButtonProps,\n    PayboxButtonProps,\n    RequestQuotationButtonProps,\n    PaymentCardButtonProps,\n    ConfirmOrderButtonProps,\n    Terms,\n    onNewAddress,\n    onNewProduct,\n    onProductDelete,\n    onProductQuantityChange,\n    onDeliveryAddressChange,\n    onInvoicingAddressChange,\n  } = props;\n\n  const { t } = useTranslation();\n  const classes = useStyles();\n\n  const [deleteDialogStore, setDeleteDialogStore] = React.useState({\n    open: false,\n    line: null,\n  });\n\n  const { open, line } = deleteDialogStore;\n\n  const handleDeleteDialogClose = React.useCallback(() => {\n    setDeleteDialogStore({\n      open: false,\n      line: null,\n    });\n  }, []);\n\n  const handleDeleteDialogOpen = React.useCallback((e, line) => {\n    setDeleteDialogStore({\n      open: true,\n      line,\n    });\n  }, []);\n\n  const handleProductDelete = React.useCallback(\n    (e) => {\n      onProductDelete(line.productId);\n      handleDeleteDialogClose();\n    },\n    [onProductDelete, handleDeleteDialogClose, line]\n  );\n\n  return (\n    <div className={classes.container}>\n      <Grid container spacing={4}>\n        <Grid item xs={12} md={6}>\n          <CheckoutAddress\n            deliveryAddress={deliveryAddress}\n            deliveryAddresses={deliveryAddresses}\n            invoicingAddress={invoicingAddress}\n            invoicingAddresses={invoicingAddresses}\n            onNewAddress={onNewAddress}\n            onDeliveryAddressChange={onDeliveryAddressChange}\n            onInvoicingAddressChange={onInvoicingAddressChange}\n          />\n          <CheckoutProductLines\n            lines={productLines}\n            onNewProduct={onNewProduct}\n            onProductQuantityChange={onProductQuantityChange}\n            onProductDelete={handleDeleteDialogOpen}\n          />\n        </Grid>\n        <Grid item xs={12} md={6}>\n          <CheckoutSummary\n            total={total}\n            totalTax={totalTax}\n            totalDiscount={totalDiscount}\n            totalWithoutTax={totalWithoutTax}\n            message={summaryMessage}\n            PaypalButtonProps={PaypalButtonProps}\n            PayboxButtonProps={PayboxButtonProps}\n            RequestQuotationButtonProps={RequestQuotationButtonProps}\n            PaymentCardButtonProps={PaymentCardButtonProps}\n            ConfirmOrderButtonProps={ConfirmOrderButtonProps}\n            Terms={Terms}\n          />\n        </Grid>\n        <ConfirmationDialog\n          open={open}\n          title={t('Confirm deletion')}\n          onClose={handleDeleteDialogClose}\n          onConfirm={handleProductDelete}\n        >\n          <Typography>{line && line.name}</Typography>\n        </ConfirmationDialog>\n      </Grid>\n      <Backdrop className={classes.backdrop} open={checkingOut}>\n        <Loader />\n      </Backdrop>\n    </div>\n  );\n}\n\nCheckout.defaultProps = {\n  productLines: [],\n  deliveryAddress: {},\n  deliveryAddresses: [],\n  invoicingAddress: {},\n  invoicingAddresses: [],\n  summaryMessage: '',\n  PaypalButtonProps: {},\n  PayboxButtonProps: {},\n  RequestQuotationButtonProps: {},\n  PaymentCardButtonProps: {},\n  ConfirmOrderButtonProps: {},\n  onNewAddress: () => {},\n  onNewProduct: () => {},\n  onProductDelete: () => {},\n  onProductQuantityChange: () => {},\n  onDeliveryAddressChange: () => {},\n  onInvoicingAddressChange: () => {},\n};\n\nexport default Checkout;\n","import React, { useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Paper from '../components/Paper';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nexport const MESSAGE_TYPE = {\n  SUCCESS: 'success',\n  FAILURE: 'failure',\n};\n\nconst useCheckoutMessageContainerStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(),\n    minHeight: theme.spacing(30),\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'column',\n  },\n  button: {\n    marginTop: theme.spacing(2),\n  },\n  success: {\n    color: theme.palette.success.main,\n  },\n  failure: {\n    color: theme.palette.error.main,\n  },\n}));\n\nfunction CheckoutMessageContainer(props) {\n  const { match, onSuccessRedirect, onFailureRedirect, onSuccessMount } = props;\n\n  const { params } = match;\n  const { messageType = MESSAGE_TYPE.SUCCESS } = params;\n\n  const { t } = useTranslation();\n  const classes = useCheckoutMessageContainerStyles();\n\n  let {\n    successMessage = t('Your payment has been successfully completed'),\n    successButtonLabel = t('Continue shopping'),\n    failureMessage = t('Your payment could not be completed'),\n    failureButtonLabel = t('Continue checkout'),\n  } = props;\n\n  let content = null;\n\n  switch (messageType) {\n    case MESSAGE_TYPE.SUCCESS:\n      content = (\n        <>\n          <Typography variant=\"h5\" className={classes.success}>\n            {successMessage}\n          </Typography>\n          <Button onClick={onSuccessRedirect} className={classes.button}>\n            {successButtonLabel}\n          </Button>\n        </>\n      );\n      break;\n    case MESSAGE_TYPE.FAILURE:\n      content = (\n        <>\n          <Typography variant=\"h5\" className={classes.failure}>\n            {failureMessage}\n          </Typography>\n          <Button onClick={onFailureRedirect} className={classes.button}>\n            {failureButtonLabel}\n          </Button>\n        </>\n      );\n      break;\n    default:\n      content = null;\n  }\n\n  useEffect(() => {\n    if (messageType === MESSAGE_TYPE.SUCCESS && onSuccessMount) {\n      onSuccessMount();\n    }\n  }, [messageType, onSuccessMount]);\n\n  return <Paper className={classes.paper}>{content}</Paper>;\n}\n\nCheckoutMessageContainer.defaultProps = {\n  onFailureRedirect: () => {},\n  onSuccessRedirect: () => {},\n};\n\nexport default CheckoutMessageContainer;\n","import React, { useState, useCallback, useEffect, useMemo } from 'react';\nimport { useSnackbar } from 'notistack';\n\nimport {\n  useEshop,\n  LOCAL_STORAGE_DELIVERY_ADDRESS,\n  LOCAL_STORAGE_INVOICING_ADDRESS,\n} from '../providers/EshopProvider';\nimport Loader from '../components/Loader';\nimport Checkout from '../components/Checkout';\nimport EshopAPI, { PRODUCT_TYPESELECT_SERVICE } from '../EshopAPI';\nimport { useTranslation } from '../providers/TranslationProvider';\nimport { MESSAGE_TYPE as CheckoutMessageType } from './CheckoutMessage';\n\nfunction useTerm() {\n  const [checked, setChecked] = useState(false);\n  const [file, setFile] = useState(null);\n  const [required, setRequired] = useState(false);\n\n  return [\n    { checked, file, required },\n    useMemo(() => ({ setChecked, setFile, setRequired }), []),\n  ];\n}\n\nfunction CheckoutContainer(props) {\n  const {\n    match,\n    history,\n    onRedirectToOrder,\n    onRedirectToQuotation,\n    onRedirectToCheckoutMessage,\n  } = props;\n  const { url } = match;\n\n  const { t } = useTranslation();\n  const { enqueueSnackbar } = useSnackbar();\n  const {\n    cart,\n    setItem,\n    clearItem,\n    clearCart,\n    setCart,\n    checkoutAddresses,\n    setInvoicingAddress: setStorageInvoicingAddress,\n    setDeliveryAddress: setStorageDeliveryAddress,\n  } = useEshop();\n\n  const [loading, setLoading] = useState(true);\n  const [checkingOut, setCheckingOut] = useState(false);\n  const [checkout, setCheckout] = useState({});\n  const [deliveryAddresses, setDeliveryAddresses] = useState([]);\n  const [invoicingAddresses, setInvoicingAddresses] = useState([]);\n  const [deliveryAddress, setDeliveryAddress] = useState({});\n  const [invoicingAddress, setInvoicingAddress] = useState({});\n  const [paypalMerchantId, setPaypalMerchantId] = useState();\n  const [canRequestQuotation, setCanRequestQuotation] = useState(false);\n  const [confirmOrder, setConfirmOrder] = useState(false);\n\n  const [dataTermState, dataTerm] = useTerm();\n  const [returnPolicyTermState, returnPolicyTerm] = useTerm();\n  const [termState, term] = useTerm();\n\n  const getAddressById = useCallback((addressId, addresses = []) => {\n    return addresses.find(\n      (address) => address.id.toString() === addressId.toString()\n    );\n  }, []);\n\n  const fetchCheckoutData = useCallback(() => {\n    EshopAPI.checkCart(cart).then((checkout) => {\n      const { itemsChanged, lines = [] } = checkout;\n      const hasZeroQuantity = lines.find(\n        (l) =>\n          l.productTypeSelect !== PRODUCT_TYPESELECT_SERVICE &&\n          Number(l.qty) === 0\n      );\n      if (itemsChanged || hasZeroQuantity) {\n        const updatedCart = checkout.lines.reduce((_cart, line) => {\n          if (Number(line.qty)) {\n            _cart[line.productId] = Number(line.qty);\n          }\n          return _cart;\n        }, {});\n        setCart(updatedCart);\n        /** Update checkout lines to override input value in checkout component */\n        checkout.lines = checkout.lines.map((line) => {\n          const { productId, qty } = line;\n          const cartQty = cart[productId];\n\n          if (Number(qty) < Number(cartQty)) {\n            line.overrideInput = true;\n          }\n          return line;\n        });\n        enqueueSnackbar(t('One or multiple items have changed in your cart'), {\n          variant: 'error',\n        });\n      }\n      setCheckout(checkout);\n    });\n    setLoading(false);\n  }, [cart, setCart, t, enqueueSnackbar]);\n\n  const handleAddressChange = useCallback(\n    (addressId, addresses = [], cb = () => {}) => {\n      const address = addresses.find((address) => address.id === addressId);\n      if (!address) {\n        return;\n      } else {\n        cb(address);\n      }\n    },\n    []\n  );\n\n  const handleDeliveryAddressChange = useCallback(\n    (e) => {\n      const { value: addressId } = e.target;\n\n      const setAddress = (address) => {\n        setDeliveryAddress(address);\n        setStorageDeliveryAddress(addressId);\n      };\n\n      handleAddressChange(addressId, deliveryAddresses, setAddress);\n    },\n    [deliveryAddresses, handleAddressChange, setStorageDeliveryAddress]\n  );\n\n  const handleInvoicingAddressChange = useCallback(\n    (e) => {\n      const { value: addressId } = e.target;\n\n      const setAddress = (address) => {\n        setInvoicingAddress(address);\n        setStorageInvoicingAddress(addressId);\n      };\n\n      handleAddressChange(addressId, invoicingAddresses, setAddress);\n    },\n    [invoicingAddresses, handleAddressChange, setStorageInvoicingAddress]\n  );\n\n  const handleEshopRedirection = useCallback(() => {\n    history.replace(`/eshop`);\n  }, [history]);\n\n  const handleNewProduct = useCallback(() => {\n    handleEshopRedirection();\n  }, [handleEshopRedirection]);\n\n  const handleNewAddress = useCallback(() => {\n    history.push({\n      pathname: `/eshop/address/new`,\n      state: {\n        fromUrl: url,\n      },\n    });\n  }, [history, url]);\n\n  const handleProductQuantityChange = useCallback(\n    (productId, qty) => {\n      setItem(productId, qty);\n    },\n    [setItem]\n  );\n\n  const handleProductDelete = useCallback(\n    (productId) => {\n      clearItem(productId);\n    },\n    [clearItem]\n  );\n\n  const handleCheckoutAction = useCallback(\n    (order, isQuotation) => {\n      clearCart();\n      enqueueSnackbar(t('Thank you for shopping'), { variant: 'success' });\n      if (isQuotation && onRedirectToOrder && order && order.id) {\n        onRedirectToQuotation(order);\n      } else if (onRedirectToOrder && order && order.id) {\n        onRedirectToOrder(order);\n      } else {\n        handleEshopRedirection();\n      }\n    },\n    [\n      clearCart,\n      onRedirectToOrder,\n      onRedirectToQuotation,\n      handleEshopRedirection,\n      t,\n      enqueueSnackbar,\n    ]\n  );\n\n  const handlePaypalCheckout = useCallback(\n    (paypalPaymentData) => {\n      setCheckingOut(true);\n      EshopAPI.checkoutPaypal({\n        paypalPaymentData,\n        orderData: {\n          deliveryAddress,\n          invoicingAddress,\n          cart,\n        },\n      })\n        .then((order) => {\n          setCheckingOut(false);\n          handleCheckoutAction(order);\n        })\n        .catch(() => {\n          setCheckingOut(false);\n          enqueueSnackbar(t('Error'), { variant: 'error' });\n        });\n    },\n    [\n      deliveryAddress,\n      invoicingAddress,\n      cart,\n      handleCheckoutAction,\n      t,\n      enqueueSnackbar,\n    ]\n  );\n\n  const handlePaymentCardCheckout = useCallback(() => {\n    setCheckingOut(true);\n    EshopAPI.checkoutPaymentCard({\n      cardId: '',\n      orderData: {\n        deliveryAddress,\n        invoicingAddress,\n        cart,\n      },\n    })\n      .then((order) => {\n        setCheckingOut(false);\n        onRedirectToCheckoutMessage(CheckoutMessageType.SUCCESS);\n      })\n      .catch(({ message = t('Your payment could not be completed') }) => {\n        setCheckingOut(false);\n        enqueueSnackbar(message, { variant: 'error' });\n      });\n  }, [\n    t,\n    deliveryAddress,\n    invoicingAddress,\n    cart,\n    enqueueSnackbar,\n    onRedirectToCheckoutMessage,\n  ]);\n\n  const handlePayboxCheckout = useCallback(() => {\n    setCheckingOut(true);\n    EshopAPI.checkoutPaybox({\n      orderData: {\n        deliveryAddress,\n        invoicingAddress,\n        cart,\n      },\n    })\n      .then((result) => {\n        if (result && result.url) {\n          const link = document.createElement('a');\n          link.href = result.url;\n          link.click();\n        } else {\n          throw new Error('Checkout Error.');\n        }\n      })\n      .catch(({ message = t('Your payment could not be completed') }) => {\n        setCheckingOut(false);\n        enqueueSnackbar(message, { variant: 'error' });\n      });\n  }, [t, deliveryAddress, invoicingAddress, cart, enqueueSnackbar]);\n\n  const handleCheckoutQuotation = useCallback(() => {\n    setCheckingOut(true);\n    EshopAPI.checkoutQuotation({\n      orderData: {\n        deliveryAddress,\n        invoicingAddress,\n        cart,\n      },\n    })\n      .then((quotation) => {\n        setCheckingOut(false);\n        handleCheckoutAction(quotation, true);\n      })\n      .catch(\n        ({ message = t('Error requesting quotation. Please try again') }) => {\n          setCheckingOut(false);\n          enqueueSnackbar(message, { variant: 'error' });\n        }\n      );\n  }, [\n    t,\n    deliveryAddress,\n    invoicingAddress,\n    cart,\n    enqueueSnackbar,\n    handleCheckoutAction,\n  ]);\n\n  const handleConfirmOrder = useCallback(() => {\n    setConfirmOrder(true);\n  }, []);\n\n  useEffect(() => {\n    EshopAPI.fetchAddresses().then((result) => {\n      if (!(result.data && result.data.length)) {\n        return;\n      }\n\n      const addresses = result.data.map((address) => {\n        return Object.assign(address, {\n          value: address.id,\n          label: `${address.address || ''} ${address.addressComplement || ''}`,\n        });\n      });\n      setDeliveryAddresses(addresses);\n      setInvoicingAddresses(addresses);\n    });\n  }, []);\n\n  useEffect(() => {\n    const manageAddress = (addresses, addressId, setAddress) => {\n      if (addresses.length) {\n        if (addressId) {\n          const address = getAddressById(addressId, addresses);\n          setAddress(address || addresses[0]);\n        } else {\n          setAddress(addresses[0]);\n        }\n      }\n    };\n    manageAddress(\n      deliveryAddresses,\n      checkoutAddresses[LOCAL_STORAGE_DELIVERY_ADDRESS],\n      setDeliveryAddress\n    );\n\n    manageAddress(\n      invoicingAddresses,\n      checkoutAddresses[LOCAL_STORAGE_INVOICING_ADDRESS],\n      setInvoicingAddress\n    );\n  }, [\n    deliveryAddresses,\n    invoicingAddresses,\n    checkoutAddresses,\n    setStorageDeliveryAddress,\n    setStorageInvoicingAddress,\n    getAddressById,\n  ]);\n\n  useEffect(() => {\n    EshopAPI.fetchPaypalMerchantId().then((result) => {\n      setPaypalMerchantId(result.merchantId);\n    });\n  }, []);\n\n  useEffect(() => {\n    EshopAPI.fetchConfiguration().then((result) => {\n      if (result.isQuotationRequestActive) {\n        setCanRequestQuotation(true);\n      }\n\n      const {\n        isDataPolicyRequired,\n        dataPolicyMetaFile,\n        isReturnPolicyRequired,\n        returnPolicyMetaFile,\n        isTermRequired,\n        termMetaFile,\n      } = result;\n\n      if (isDataPolicyRequired) {\n        dataTerm.setRequired(true);\n        dataTerm.setFile(dataPolicyMetaFile);\n      }\n\n      if (isReturnPolicyRequired) {\n        returnPolicyTerm.setRequired(true);\n        returnPolicyTerm.setFile(returnPolicyMetaFile);\n      }\n\n      if (isTermRequired) {\n        term.setRequired(true);\n        term.setFile(termMetaFile);\n      }\n    });\n  }, [dataTerm, returnPolicyTerm, term]);\n\n  useEffect(() => {\n    fetchCheckoutData();\n  }, [fetchCheckoutData]);\n\n  const disableCheckoutAction = !(\n    checkout &&\n    checkout.lines &&\n    checkout.lines.length\n  );\n\n  const { paymentModes = [] } = checkout;\n\n  const hidePaypalButton = !paymentModes.includes('paypal');\n  const hidePayboxButton = !paymentModes.includes('paybox');\n  const hideCreateOrderButton = !paymentModes.includes('stripe');\n\n  const {\n    original: { total: originalTotal = '0.00' } = {},\n    currency: { code: currencyCode = 'EUR' } = {},\n  } = checkout;\n  const paypalClientId = process.env.REACT_APP_PAYPAL_CLIENT_ID;\n\n  const PaypalButtonProps = useMemo(\n    () => ({\n      showButton:\n        paypalClientId &&\n        paypalMerchantId &&\n        !disableCheckoutAction &&\n        !hidePaypalButton &&\n        confirmOrder,\n      amount: originalTotal,\n      onSuccess: handlePaypalCheckout,\n      options: {\n        clientId: paypalClientId,\n        merchantId: paypalMerchantId,\n        currency: currencyCode,\n        disableFunding: 'card',\n      },\n    }),\n    [\n      handlePaypalCheckout,\n      originalTotal,\n      paypalClientId,\n      paypalMerchantId,\n      disableCheckoutAction,\n      currencyCode,\n      hidePaypalButton,\n      confirmOrder,\n    ]\n  );\n\n  const checkoutEnabled = Boolean(paymentModes && paymentModes.length);\n  const summaryMessage = checkoutEnabled\n    ? ''\n    : t('Eshop not processing checkout');\n\n  const PaymentCardButtonProps = useMemo(\n    () => ({\n      showButton: !hideCreateOrderButton && confirmOrder,\n      disabled: disableCheckoutAction,\n      onClick: handlePaymentCardCheckout,\n    }),\n    [\n      disableCheckoutAction,\n      handlePaymentCardCheckout,\n      hideCreateOrderButton,\n      confirmOrder,\n    ]\n  );\n\n  const PayboxButtonProps = useMemo(\n    () => ({\n      showButton: !hidePayboxButton && confirmOrder,\n      disabled: disableCheckoutAction,\n      onClick: handlePayboxCheckout,\n    }),\n    [\n      disableCheckoutAction,\n      handlePayboxCheckout,\n      hidePayboxButton,\n      confirmOrder,\n    ]\n  );\n\n  const termsAccepted = useMemo(\n    () =>\n      [dataTermState, returnPolicyTermState, termState].reduce(\n        (accepted, state) => {\n          if (!accepted) return false;\n          if (state.required && !state.checked) {\n            accepted = false;\n          }\n          return accepted;\n        },\n        true\n      ),\n    [dataTermState, returnPolicyTermState, termState]\n  );\n\n  const ConfirmOrderButtonProps = useMemo(\n    () => ({\n      showButton: !confirmOrder,\n      disabled: !termsAccepted || disableCheckoutAction || !checkoutEnabled,\n      onClick: handleConfirmOrder,\n    }),\n    [\n      termsAccepted,\n      confirmOrder,\n      handleConfirmOrder,\n      disableCheckoutAction,\n      checkoutEnabled,\n    ]\n  );\n\n  const RequestQuotationButtonProps = useMemo(\n    () => ({\n      showButton: canRequestQuotation && !confirmOrder,\n      disabled: !termsAccepted || disableCheckoutAction,\n      onClick: handleCheckoutQuotation,\n    }),\n    [\n      termsAccepted,\n      canRequestQuotation,\n      disableCheckoutAction,\n      handleCheckoutQuotation,\n      confirmOrder,\n    ]\n  );\n\n  const DataTerm = useMemo(\n    () => ({\n      ...dataTermState,\n      ...dataTerm,\n      show: !confirmOrder,\n      fileURL: EshopAPI.getMetafileURL(dataTermState.file),\n      label: t('Data Term'),\n    }),\n    [dataTermState, dataTerm, confirmOrder, t]\n  );\n\n  const ReturnPolicyTerm = useMemo(\n    () => ({\n      ...returnPolicyTermState,\n      ...returnPolicyTerm,\n      show: !confirmOrder,\n      fileURL: EshopAPI.getMetafileURL(returnPolicyTermState.file),\n      label: t('Return Policy Term'),\n    }),\n    [returnPolicyTermState, returnPolicyTerm, confirmOrder, t]\n  );\n\n  const Term = useMemo(\n    () => ({\n      ...termState,\n      ...term,\n      show: !confirmOrder,\n      fileURL: EshopAPI.getMetafileURL(termState.file),\n      label: t('Term'),\n    }),\n    [termState, term, confirmOrder, t]\n  );\n\n  const Terms = useMemo(() => [DataTerm, ReturnPolicyTerm, Term], [\n    DataTerm,\n    ReturnPolicyTerm,\n    Term,\n  ]);\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  return (\n    <Checkout\n      total={checkout.total}\n      totalTax={checkout.totalTax}\n      totalDiscount={checkout.totalDiscount}\n      totalWithoutTax={checkout.totalWithoutTax}\n      productLines={checkout.lines}\n      deliveryAddress={deliveryAddress}\n      deliveryAddresses={deliveryAddresses}\n      invoicingAddress={invoicingAddress}\n      invoicingAddresses={invoicingAddresses}\n      checkingOut={checkingOut}\n      summaryMessage={summaryMessage}\n      PaypalButtonProps={PaypalButtonProps}\n      PayboxButtonProps={PayboxButtonProps}\n      PaymentCardButtonProps={PaymentCardButtonProps}\n      ConfirmOrderButtonProps={ConfirmOrderButtonProps}\n      RequestQuotationButtonProps={RequestQuotationButtonProps}\n      Terms={Terms}\n      onNewAddress={handleNewAddress}\n      onNewProduct={handleNewProduct}\n      onProductDelete={handleProductDelete}\n      onProductQuantityChange={handleProductQuantityChange}\n      onDeliveryAddressChange={handleDeliveryAddressChange}\n      onInvoicingAddressChange={handleInvoicingAddressChange}\n    />\n  );\n}\n\nexport default CheckoutContainer;\n","import React from 'react';\nimport clsx from 'clsx';\nimport { Carousel as RCarousel } from 'react-responsive-carousel';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport 'react-responsive-carousel/lib/styles/carousel.min.css';\n\nconst useStyles = makeStyles((theme) => ({\n  carousel: {\n    '& li.slide': {\n      backgroundColor: 'transparent',\n    },\n  },\n  indicator: {\n    background: 'transparent',\n    width: 10,\n    height: 10,\n    borderRadius: '50%',\n    display: 'inline-block',\n    border: '1px solid',\n    borderColor: theme.palette.secondary.main,\n    margin: '0 8px',\n    cursor: 'pointer',\n  },\n  selected: {\n    backgroundColor: theme.palette.secondary.main,\n  },\n  image: {\n    height: 350,\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'contain',\n  },\n}));\n\nfunction Carousel(props) {\n  const { images } = props;\n\n  const classes = useStyles();\n\n  const renderIndicator = React.useCallback(\n    (onClickHandler, isSelected, index, label) => {\n      if (isSelected) {\n        return (\n          <li\n            className={clsx(classes.indicator, classes.selected)}\n            aria-label={`Selected: ${label} ${index + 1}`}\n            title={`Selected: ${label} ${index + 1}`}\n          />\n        );\n      }\n      return (\n        <li\n          className={classes.indicator}\n          onClick={onClickHandler}\n          onKeyDown={onClickHandler}\n          value={index}\n          key={index}\n          role=\"button\"\n          tabIndex={0}\n          title={`${label} ${index + 1}`}\n          aria-label={`${label} ${index + 1}`}\n        />\n      );\n    },\n    [classes]\n  );\n\n  if (!(images && images.length)) {\n    return null;\n  }\n\n  return (\n    <RCarousel\n      showStatus={false}\n      showArrows={false}\n      showThumbs={false}\n      swipeable={true}\n      emulateTouch={true}\n      renderIndicator={renderIndicator}\n      className={classes.carousel}\n    >\n      {images.map((image, i) => (\n        <div\n          key={i}\n          style={{ backgroundImage: `url(${image})` }}\n          className={classes.image}\n        />\n      ))}\n    </RCarousel>\n  );\n}\n\nexport default Carousel;\n","import React, { useState, useCallback, useEffect } from 'react';\nimport clsx from 'clsx';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\n\nimport EshopAPI from '../EshopAPI';\nimport Paper from '../components/Paper';\nimport Carousel from '../components/Carousel';\nimport QuantityInput from '../components/QuantityInput';\nimport { useEshop } from '../providers/EshopProvider';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nconst useProductInformationStyles = makeStyles((theme) => ({\n  tag: {\n    height: 60,\n    borderRadius: 4,\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(2),\n    backgroundColor: theme.palette.secondary.main,\n    marginBottom: theme.spacing(2),\n  },\n  tagLabel: {\n    color: '#FFFFFF',\n    fontWeight: 'bold',\n  },\n  paper: {\n    padding: theme.spacing(2),\n  },\n  productTitle: {\n    fontWeight: 'bold',\n  },\n  chip: {\n    backgroundColor: theme.palette.secondary.light,\n    borderRadius: 4,\n    color: theme.palette.secondary.main,\n    padding: theme.spacing(),\n    marginRight: theme.spacing(),\n  },\n  productOriginalPrice: {\n    textDecoration: 'line-through',\n    color: '#000000',\n  },\n  productPrice: {\n    color: theme.palette.secondary.main,\n  },\n}));\n\nfunction ProductInformation(props) {\n  const {\n    product,\n    quantity,\n    complementaryProducts,\n    allowOutOfStock,\n    onQuantityChange,\n    onAddProduct,\n    onComplementaryProductChange,\n  } = props;\n\n  const { t } = useTranslation();\n  const classes = useProductInformationStyles();\n\n  const isUnavailable = !allowOutOfStock && product.unavailable;\n  const discountPercentage = product._displayDiscountPercentage;\n  const discountedPrice = product._displayDiscountPrice;\n\n  const tag = isUnavailable\n    ? t('Unavailable')\n    : discountPercentage\n    ? `${discountPercentage} ${t('Discount')}`\n    : '';\n\n  const categories =\n    product._categories && product._categories.length\n      ? product._categories.map((category) => (\n          <span className={classes.chip} key={category.id}>\n            {category.name}\n          </span>\n        ))\n      : null;\n\n  const price = (\n    <Typography variant=\"h6\" className={classes.productPrice}>\n      <span\n        className={clsx({ [classes.productOriginalPrice]: discountedPrice })}\n      >\n        {product._displayPrice}\n      </span>\n      &nbsp;\n      {discountedPrice}\n    </Typography>\n  );\n\n  return (\n    <>\n      {tag && (\n        <div className={classes.tag}>\n          <Typography className={classes.tagLabel} variant=\"h5\">\n            {tag}\n          </Typography>\n        </div>\n      )}\n      <Paper className={classes.paper}>\n        <Grid container spacing={3}>\n          <Grid item xs={12}>\n            <Typography className={classes.productTitle} variant=\"h4\" noWrap>\n              {product.name}\n            </Typography>\n          </Grid>\n          <Grid item xs={12}>\n            <Typography\n              dangerouslySetInnerHTML={{ __html: product.description }}\n            />\n          </Grid>\n          <Grid item xs={12}>\n            {categories}\n          </Grid>\n          {complementaryProducts && Boolean(complementaryProducts.length) && (\n            <>\n              <Grid item xs={12}>\n                <Typography gutterBottom variant=\"h6\">\n                  {t('Complementary Products')}\n                </Typography>\n                <Divider />\n                {complementaryProducts.map((p) => (\n                  <FormControlLabel\n                    key={p.id}\n                    control={\n                      <Checkbox\n                        onChange={(event) => {\n                          const { checked } = event.target;\n                          onComplementaryProductChange(event, p, {\n                            checked,\n                          });\n                        }}\n                        checked={p.checked}\n                        disabled={!p.optional}\n                      />\n                    }\n                    label={p.name}\n                  />\n                ))}\n                <Divider />\n              </Grid>\n            </>\n          )}\n          <Grid item xs={12}>\n            {price}\n          </Grid>\n          <Grid item xs={12}>\n            <Grid container spacing={1} alignItems=\"center\">\n              <Grid item xs={12} md={6}>\n                <QuantityInput\n                  name=\"quantity\"\n                  label={t('Quantity')}\n                  value={quantity}\n                  disabled={isUnavailable}\n                  moreLabel={t('More')}\n                  onChange={onQuantityChange}\n                />\n              </Grid>\n              <Grid item xs={12} md={6} align=\"center\">\n                <Button\n                  disabled={isUnavailable}\n                  onClick={onAddProduct}\n                  startIcon={<AddShoppingCartIcon />}\n                >\n                  {t('Add to cart')}\n                </Button>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Paper>\n    </>\n  );\n}\n\nProductInformation.defaultProps = {\n  product: {},\n  quantity: 1,\n  onQuantityChange: () => {},\n  onAddProduct: () => {},\n};\n\nfunction ProductView(props) {\n  const { match = {}, history } = props;\n  const { params = {} } = match;\n  const { productId } = params;\n\n  const { cart, setItem, config } = useEshop();\n\n  const [quantity, setQuantity] = useState(1);\n  const [product, setProduct] = useState(null);\n  const [complementaryProducts, setComplementaryProducts] = useState([]);\n\n  const handleAddProduct = useCallback(() => {\n    const existingQty = cart[product.id] || 0;\n    const qty = existingQty + Number(quantity);\n\n    setItem(product.id, qty);\n\n    complementaryProducts.forEach((p) => {\n      if (!p.checked) return;\n      setItem(p.id, p.qty + (cart[p.id] || 0));\n    });\n  }, [quantity, product, cart, setItem, complementaryProducts]);\n\n  const handleQuantityChange = useCallback(\n    (e) => setQuantity(Number(e.target.value)),\n    []\n  );\n\n  const handleComplementaryProductChange = useCallback(\n    (event, product, updates) => {\n      setComplementaryProducts((products) =>\n        products.map((p) => (p.id === product.id ? { ...p, ...updates } : p))\n      );\n    },\n    []\n  );\n\n  useEffect(() => {\n    EshopAPI.fetchProduct(productId).then((product) => {\n      if (product && product.id) {\n        setProduct(product);\n        setComplementaryProducts(\n          product.complementaryProducts.map((p) => ({\n            ...p,\n            checked: !p.optional,\n          }))\n        );\n      } else {\n        history.replace('/eshop');\n      }\n    });\n  }, [history, productId]);\n\n  if (!product) {\n    return null;\n  }\n\n  return (\n    <Grid container spacing={1}>\n      <Grid item xs={12} md={3}>\n        <Carousel images={product.images} />\n      </Grid>\n      <Grid item xs={12} md={9}>\n        <ProductInformation\n          allowOutOfStock={config.isAllowOutOfStock}\n          product={product}\n          complementaryProducts={complementaryProducts}\n          quantity={quantity}\n          onAddProduct={handleAddProduct}\n          onQuantityChange={handleQuantityChange}\n          onComplementaryProductChange={handleComplementaryProductChange}\n        />\n      </Grid>\n    </Grid>\n  );\n}\n\nexport default ProductView;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport NextIcon from '@material-ui/icons/ChevronRight';\nimport PreviousIcon from '@material-ui/icons/ChevronLeft';\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(0.5),\n    display: 'flex',\n    width: 'fit-content',\n    alignItems: 'center',\n  },\n}));\n\nfunction Pagination(props) {\n  const { onNext, onPrevious, label, disableNext, disablePrevious } = props;\n\n  const classes = useStyles();\n\n  return (\n    <div className={classes.paper}>\n      <Typography>{label}</Typography>\n      &nbsp;&nbsp;\n      <IconButton size=\"small\" onClick={onPrevious} disabled={disablePrevious}>\n        <PreviousIcon />\n      </IconButton>\n      &nbsp;&nbsp;\n      <IconButton size=\"small\" onClick={onNext} disabled={disableNext}>\n        <NextIcon />\n      </IconButton>\n      &nbsp;&nbsp;\n    </div>\n  );\n}\n\nexport default Pagination;\n","import React from 'react';\nimport clsx from 'clsx';\nimport MuiChip from '@material-ui/core/Chip';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  chip: {\n    color: '#616161',\n  },\n  icon: {\n    backgroundColor: `${theme.palette.secondary.main}09`,\n  },\n  iconSelected: {\n    color: theme.palette.secondary.main,\n  },\n  chipSelected: {\n    color: theme.palette.secondary.main,\n    backgroundColor: theme.palette.secondary.light,\n  },\n  chipClickable: {\n    '&:focus, &:hover': {\n      backgroundColor: theme.palette.secondary.light,\n    },\n  },\n}));\n\nfunction Chip(props) {\n  const { icon: Icon, label, isSelected, onClick, className } = props;\n\n  const classes = useStyles();\n\n  return (\n    <MuiChip\n      label={label}\n      icon={\n        Icon && (\n          <Icon\n            fontSize=\"small\"\n            classes={{\n              root: clsx(classes.icon, {\n                [classes.iconSelected]: isSelected,\n              }),\n            }}\n          />\n        )\n      }\n      classes={{\n        root: clsx(\n          classes.chip,\n          {\n            [classes.chipSelected]: isSelected,\n          },\n          className\n        ),\n        clickable: classes.chipClickable,\n      }}\n      onClick={onClick}\n    />\n  );\n}\n\nChip.defaultProps = {\n  Icon: () => null,\n  onClick: () => {},\n};\n\nexport default Chip;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Chip from './Chip';\n\nconst useStyles = makeStyles((theme) => ({\n  chipContainer: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    marginBottom: theme.spacing(2),\n  },\n  chip: {\n    margin: theme.spacing(0.3),\n  },\n}));\n\nexport default ({ categories, selectedCategoryId, onCategoryClick }) => {\n  const classes = useStyles();\n\n  const handleChipInteraction = (categoryId) => {\n    onCategoryClick && onCategoryClick(categoryId);\n  };\n\n  return (\n    <div className={classes.chipContainer}>\n      {categories.map((category) => (\n        <Chip\n          className={classes.chip}\n          key={category.id}\n          label={category.name}\n          isSelected={selectedCategoryId === category.id}\n          onClick={() => handleChipInteraction(category.id)}\n        />\n      ))}\n    </div>\n  );\n};\n","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport SearchIcon from '@material-ui/icons/Search';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    '& svg': {\n      color: '#616161',\n    },\n    '& label.Mui-focused': {\n      color: '#616161',\n    },\n    '& .MuiInput-underline:after, & .MuiInput-underline:before,& .MuiInput-underline:hover:not(.Mui-disabled):before': {\n      borderBottomColor: '#616161',\n    },\n  },\n}));\n\nfunction SearchInput(props) {\n  const classes = useStyles();\n\n  return (\n    <TextField\n      {...props}\n      color=\"default\"\n      classes={classes}\n      variant=\"standard\"\n      InputProps={{\n        disableUnderline: false,\n        endAdornment: <SearchIcon />,\n      }}\n    />\n  );\n}\n\nexport default SearchInput;\n","import { useEffect, useRef, useCallback } from 'react';\nexport default function useDebounce(cb, duration) {\n  const timer = useRef(null);\n\n  const clearTimer = useCallback(\n    () => timer.current && clearTimeout(timer.current),\n    []\n  );\n  const setTimer = useCallback(\n    (cb) => (timer.current = setTimeout(cb, duration)),\n    [duration]\n  );\n\n  useEffect(() => {\n    return () => clearTimer();\n  }, [clearTimer]);\n\n  const debounced = useCallback(\n    (...args) => {\n      clearTimer();\n      setTimer(() => cb(...args));\n    },\n    [clearTimer, setTimer, cb]\n  );\n\n  return debounced;\n}\n","import React from 'react';\n\nimport SearchInput from './SearchInput';\nimport { useTranslation } from '../providers/TranslationProvider';\nimport useDebounce from '../hooks/useDebounce';\n\nexport default ({ value: valueProp, onChange }) => {\n  const { t } = useTranslation();\n  const [value, setValue] = React.useState(valueProp);\n\n  const debounceChange = useDebounce(onChange, 300);\n\n  const handleChange = (e) => {\n    const { value } = e.target;\n    setValue(value);\n    debounceChange(value);\n  };\n\n  const handleSubmit = (e) => e.preventDefault();\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <SearchInput\n        name=\"search\"\n        placeholder={t('Search')}\n        onChange={handleChange}\n        value={value}\n      />\n    </form>\n  );\n};\n","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n\nfunction List(props) {\n  const {\n    values,\n    ValueUniqueKey = 'id',\n    ItemContainerProps = {},\n    noRecordLabel = 'No record found',\n    renderItem = () => null,\n  } = props;\n\n  const getItemContainerProps = (value, index) => ({\n    item: true,\n    xs: 12,\n    sm: 4,\n    md: 3,\n    key: value[ValueUniqueKey] || index,\n    ...ItemContainerProps,\n  });\n\n  return (\n    <Grid container spacing={3}>\n      {values && values.length ? (\n        values.map((value, index) => (\n          <Grid {...getItemContainerProps(value, index)}>\n            {renderItem(value)}\n          </Grid>\n        ))\n      ) : (\n        <Grid item xs={12}>\n          <Typography>{noRecordLabel}</Typography>\n        </Grid>\n      )}\n    </Grid>\n  );\n}\n\nexport default List;\n","import React, { useMemo } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Paper from './Paper';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nconst IMAGE_WIDTH = 138;\n\nconst useProductTagStyles = makeStyles((theme) => ({\n  tag: {\n    position: 'absolute',\n    padding: theme.spacing(0.5),\n    backgroundColor: theme.palette.secondary.main,\n    color: '#FFFFFF',\n    right: 0,\n    bottom: (props) => theme.spacing(2),\n  },\n}));\n\nfunction ProductTag(props) {\n  const { product, allowOutOfStock } = props;\n\n  const classes = useProductTagStyles();\n  const { t } = useTranslation();\n\n  if (!allowOutOfStock && product.unavailable) {\n    return (\n      <Box boxShadow={3} className={classes.tag}>\n        {t('Unavailable')}\n      </Box>\n    );\n  }\n\n  if (product._displayDiscountPercentage) {\n    return (\n      <Box boxShadow={3} className={classes.tag}>\n        {product._displayDiscountPercentage}\n      </Box>\n    );\n  }\n\n  return null;\n}\n\nconst useProductInformation = makeStyles((theme) => ({\n  container: {\n    padding: theme.spacing(2),\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n    justifyContent: 'space-between',\n    minHeight: theme.spacing(6),\n  },\n  productName: {\n    fontWeight: 'bold',\n  },\n  productDescription: {\n    display: '-webkit-box',\n    '-webkit-box-orient': 'vertical',\n    '-webkit-line-clamp': 2,\n    overflow: 'hidden',\n    '& > *:first-child': {\n      margin: 0,\n    },\n  },\n  productPrice: {\n    color: theme.palette.secondary.main,\n    marginTop: theme.spacing(),\n  },\n  productDiscountedDisplayPrice: {\n    textDecoration: 'line-through',\n    color: 'black',\n  },\n}));\n\nfunction ProductInformation(props) {\n  const { product = {} } = props;\n\n  const hasImage = product && product.images && product.images[0];\n\n  const classes = useProductInformation({ hasImage });\n\n  const productPrice = product._displayDiscountPrice ? (\n    <>\n      <span className={classes.productDiscountedDisplayPrice}>\n        {product._displayPrice}\n      </span>\n      &nbsp;&nbsp;\n      {product._displayDiscountPrice}\n    </>\n  ) : (\n    product._displayPrice\n  );\n\n  const description = useMemo(() => {\n    var p = document.createElement('p');\n    p.innerHTML = product.description;\n    return p.innerText;\n  }, [product.description]);\n\n  return (\n    <div className={classes.container}>\n      <Box pb={1}>\n        <Typography variant=\"h5\" className={classes.productName} noWrap>\n          {product.name}\n        </Typography>\n      </Box>\n      <Box className={classes.productDescription}>\n        <Typography>{description}</Typography>\n      </Box>\n      <Typography variant=\"body2\" className={classes.productPrice}>\n        {productPrice}\n      </Typography>\n    </div>\n  );\n}\n\nconst useProductImageStyles = makeStyles((theme) => ({\n  productImage: ({ image }) => ({\n    position: 'relative',\n    display: 'flex',\n    justifyContent: 'center',\n    width: IMAGE_WIDTH,\n    overflow: 'hidden',\n    flexShrink: 0,\n    backgroundPosition: 'center',\n    backgroundImage: `url(${image})`,\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'contain',\n  }),\n}));\n\nfunction ProductImage(props) {\n  const { product } = props;\n  const image = product && product.images && product.images[0];\n  const classes = useProductImageStyles({ image });\n\n  return image ? <div className={classes.productImage} /> : null;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    display: 'flex',\n    cursor: 'pointer',\n    height: theme.spacing(18.25),\n  },\n}));\n\nfunction ProductCard(props) {\n  const { product = {}, allowOutOfStock, onClick } = props;\n\n  const classes = useStyles();\n\n  const handleClick = React.useCallback(\n    (e) => {\n      onClick && onClick(e, product.id);\n    },\n    [onClick, product]\n  );\n\n  return (\n    <Paper className={classes.paper} onClick={handleClick}>\n      <ProductInformation product={product} />\n      <ProductImage product={product} />\n      <ProductTag product={product} allowOutOfStock={allowOutOfStock} />\n    </Paper>\n  );\n}\n\nexport default ProductCard;\n","import React from 'react';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport ProductCard from './ProductCard';\n\nconst useBadgeStyles = makeStyles((theme) => ({\n  badge: {\n    color: 'white',\n    width: 'fit-content',\n    minWidth: 18,\n    height: 18,\n    fontSize: '0.675rem',\n    borderRadius: 20,\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingLeft: 2,\n    paddingRight: 2,\n    boxSizing: 'border-box',\n    backgroundColor: theme.palette.secondary.main,\n  },\n}));\n\nfunction Badge(props) {\n  const { value, className } = props;\n\n  const classes = useBadgeStyles();\n\n  return <div className={clsx(classes.badge, className)}>{value}</div>;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    position: 'relative',\n    width: '100%',\n  },\n  badge: {\n    position: 'absolute',\n    top: theme.spacing(),\n    right: theme.spacing(),\n    zIndex: 1,\n  },\n}));\n\nexport default ({ count = 0, ...props }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.container}>\n      {count ? <Badge value={count} className={classes.badge} /> : null}\n      <ProductCard {...props} />\n    </div>\n  );\n};\n","import React from 'react';\n\nimport List from './List';\nimport Loader from './Loader';\nimport CatalogProductCard from './CatalogProductCard';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nfunction ProductList(props) {\n  const { loading, products, allowOutOfStock, onClick } = props;\n\n  const { t } = useTranslation();\n\n  return loading ? (\n    <Loader />\n  ) : (\n    <List\n      values={products}\n      ItemContainerProps={{ md: 4 }}\n      renderItem={(product) => (\n        <CatalogProductCard\n          allowOutOfStock={allowOutOfStock}\n          product={product}\n          count={product.count}\n          onClick={onClick}\n        />\n      )}\n      noRecordLabel={t('No record found')}\n    />\n  );\n}\n\nProductList.defaultProps = {\n  products: [],\n  loading: false,\n  onClick: () => {},\n};\n\nexport default ProductList;\n","import React from 'react';\n\nfunction usePagination(\n  state = {\n    page: 0,\n    limit: 25,\n  }\n) {\n  const [store, setStore] = React.useState(state);\n\n  const changePage = React.useCallback(\n    (page) => setStore((store) => ({ ...store, page })),\n    []\n  );\n\n  const nextPage = React.useCallback(\n    () => setStore((store) => ({ ...store, page: store.page + 1 })),\n    []\n  );\n\n  const previousPage = React.useCallback(\n    () => setStore((store) => ({ ...store, page: store.page - 1 })),\n    []\n  );\n\n  const paginationHandler = React.useMemo(\n    () => ({ changePage, nextPage, previousPage }),\n    [nextPage, previousPage, changePage]\n  );\n\n  return [store, paginationHandler];\n}\n\nexport default usePagination;\n","import React, { useCallback, useState, useEffect } from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Pagination from '../components/Pagination';\nimport CategoryList from '../components/CategoryList';\nimport ProductSearch from '../components/ProductSearch';\nimport Loader from '../components/Loader';\nimport ProductList from '../components/ProductList';\nimport EshopAPI from '../EshopAPI';\nimport usePagination from '../hooks/usePagination';\nimport { useEshop } from '../providers/EshopProvider';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nconst useStyles = makeStyles({\n  header: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  filters: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  },\n});\n\nconst ALL_CATEGORY = {\n  id: -1,\n  name: 'All',\n};\n\nfunction ProductListContainer(props) {\n  const { match, history, location } = props;\n  const { url } = match;\n\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const [paginationStore, paginationHandler] = usePagination({\n    limit: 25,\n    page: (location.state || {}).page || 0,\n  });\n\n  const { limit, page } = paginationStore;\n\n  const { cart = {}, config = {} } = useEshop();\n\n  const [\n    { loadingProducts, products, totalProducts },\n    setProductsStore,\n  ] = useState({\n    products: [],\n    totalProducts: 0,\n    loadingProducts: true,\n  });\n\n  const previouslySetCategoryId = Number(\n    location &&\n      location.search &&\n      new URLSearchParams(location.search).get('categoryid')\n  );\n\n  const [\n    { loadingCategories, categories, selectedCategoryId },\n    setCategoriesStore,\n  ] = useState({\n    categories: [ALL_CATEGORY],\n    selectedCategoryId: previouslySetCategoryId || -1,\n    loadingCategories: true,\n  });\n\n  const [searchInput, setSearchInput] = useState(undefined);\n\n  const handleChangePage = useCallback(\n    (page) => {\n      paginationHandler.changePage(page);\n      history.replace({\n        pathname: url,\n        state: { page },\n        search: location.search,\n      });\n    },\n    [url, history, location, paginationHandler]\n  );\n\n  useEffect(() => {\n    async function fetchCategories() {\n      setCategoriesStore((store) => ({ ...store, loadingCategories: true }));\n      EshopAPI.fetchCategories()\n        .then((categories) => {\n          setCategoriesStore((store) => ({\n            ...store,\n            categories: [ALL_CATEGORY].concat(categories),\n            loadingCategories: false,\n          }));\n        })\n        .catch(() => {\n          setCategoriesStore((store) => ({\n            ...store,\n            loadingCategories: false,\n          }));\n        });\n    }\n\n    fetchCategories();\n  }, []);\n\n  useEffect(() => {\n    async function fetchProducts() {\n      setProductsStore((store) => ({ ...store, loadingProducts: true }));\n\n      const query = {\n        limit,\n        page: page + 1,\n        searchInput,\n      };\n\n      const handleResult = ({ data, total, offset }) => {\n        if (total < offset) {\n          handleChangePage(0);\n        } else {\n          setProductsStore({\n            products: data.map((product) => ({\n              ...product,\n              count: cart[product.id],\n            })),\n            totalProducts: total,\n            loadingProducts: false,\n          });\n        }\n      };\n\n      const promise =\n        selectedCategoryId === -1\n          ? EshopAPI.fetchProducts(query)\n          : EshopAPI.fetchCategoryProducts(selectedCategoryId, query);\n\n      promise.then(handleResult).catch(() => {\n        setProductsStore((store) => ({ ...store, loadingProducts: false }));\n      });\n    }\n\n    fetchProducts();\n  }, [selectedCategoryId, limit, page, searchInput, cart, handleChangePage]);\n\n  const handleCategoryClick = useCallback(\n    (chipId = -1) => {\n      history.replace({\n        pathname: url,\n        search: `?categoryid=${Number(chipId)}`,\n      });\n      paginationHandler.changePage(0);\n      setCategoriesStore((store) => ({\n        ...store,\n        selectedCategoryId: Number(chipId),\n      }));\n    },\n    [history, url, paginationHandler]\n  );\n\n  const handleProductClick = useCallback(\n    (e, productId) => {\n      history.push({\n        pathname: `${url}/product/${productId}`,\n        state: { page },\n        search: location.search,\n      });\n    },\n    [history, url, page, location]\n  );\n\n  return (\n    <>\n      <div className={classes.header}>\n        <div className={classes.filters}>\n          {loadingCategories ? (\n            <Loader />\n          ) : (\n            <CategoryList\n              categories={categories}\n              selectedCategoryId={selectedCategoryId}\n              onCategoryClick={handleCategoryClick}\n            />\n          )}\n\n          <ProductSearch value={searchInput} onChange={setSearchInput} />\n        </div>\n\n        <Pagination\n          label={`${t('Products')} : ${\n            totalProducts ? page * limit + 1 : 0\n          } to ${\n            Math.min(page * limit + limit, totalProducts) || 0\n          } of ${totalProducts}`}\n          onNext={paginationHandler.nextPage}\n          onPrevious={paginationHandler.previousPage}\n          disablePrevious={page === 0}\n          disableNext={(page + 1) * limit >= totalProducts}\n        />\n      </div>\n      <div>\n        <Typography gutterBottom>\n          <i>{`${\n            config.isAti\n              ? t('All prices include taxes')\n              : t('All prices are tax free')\n          }`}</i>\n        </Typography>\n      </div>\n      <ProductList\n        allowOutOfStock={config.isAllowOutOfStock}\n        loading={loadingProducts}\n        onClick={handleProductClick}\n        products={products}\n      />\n    </>\n  );\n}\n\nexport default ProductListContainer;\n","import React, { useCallback } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport CheckoutContainer from './Checkout';\nimport CheckoutMessageContainer from './CheckoutMessage';\nimport ProductViewContainer from './ProductView';\nimport ProductListContainer from './ProductList';\nimport { useEshop } from '../providers/EshopProvider';\n\nfunction EshopViewContainer(props) {\n  const { match, history } = props;\n  const { path, url } = match;\n\n  const { clearCart } = useEshop();\n\n  const handleRedirectToCheckout = useCallback(() => {\n    history.replace(`${url}/checkout`);\n  }, [history, url]);\n\n  const handleRedirectToEshop = useCallback(() => {\n    history.replace(url);\n  }, [history, url]);\n\n  const handleRedirectToCheckoutMessage = useCallback(\n    (messageType) => {\n      history.replace(`${url}/checkout/${messageType}`);\n    },\n    [history, url]\n  );\n\n  return (\n    <Switch>\n      <Route\n        path={`${path}/checkout/:messageType`}\n        render={(props) => (\n          <CheckoutMessageContainer\n            {...props}\n            onSuccessMount={clearCart}\n            onSuccessRedirect={handleRedirectToEshop}\n            onFailureRedirect={handleRedirectToCheckout}\n          />\n        )}\n      />\n      <Route\n        path={`${path}/checkout`}\n        render={(props) => (\n          <CheckoutContainer\n            {...props}\n            onRedirectToCheckoutMessage={handleRedirectToCheckoutMessage}\n          />\n        )}\n      />\n      <Route\n        path={`${path}/product/:productId`}\n        component={ProductViewContainer}\n      />\n      <Route path={path} component={ProductListContainer} />\n      <Redirect to={path} />\n    </Switch>\n  );\n}\n\nexport default EshopViewContainer;\n","import React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport EshopViewContainer from '../containers/EshopView';\n\nfunction Eshop(props) {\n  const { match } = props;\n  const { path } = match;\n\n  return (\n    <Switch>\n      <Route path={path} component={EshopViewContainer} />\n      <Redirect to={path} />\n    </Switch>\n  );\n}\n\nexport default Eshop;\n","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport Paper from './Paper';\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    height: 138,\n    padding: theme.spacing(),\n  },\n  action: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n}));\n\nfunction AddressCard({ address, onDelete, onEdit }) {\n  const classes = useStyles();\n\n  return (\n    <Paper className={classes.paper}>\n      <Grid container justify=\"center\" spacing={2}>\n        <Grid item xs={12}>\n          <div className={classes.action}>\n            <IconButton size=\"small\" onClick={(e) => onEdit(e, address)}>\n              <EditIcon />\n            </IconButton>\n            <IconButton size=\"small\" onClick={(e) => onDelete(e, address)}>\n              <DeleteIcon />\n            </IconButton>\n          </div>\n        </Grid>\n        <Grid item xs={12}>\n          <Typography>{address.displayAddress}</Typography>\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n}\n\nAddressCard.defaultProps = {\n  onDelete: () => {},\n  onEdit: () => {},\n};\n\nexport default AddressCard;\n","import React from 'react';\n\nimport AddressCard from './AddressCard';\nimport List from './List';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nfunction AddressList(props) {\n  const { addresses, onDelete, onEdit } = props;\n\n  const { t } = useTranslation();\n\n  return (\n    <List\n      values={addresses}\n      noRecordLabel={t('No record found')}\n      renderItem={(address) => (\n        <AddressCard address={address} onDelete={onDelete} onEdit={onEdit} />\n      )}\n    />\n  );\n}\n\nAddressList.defaultProps = {\n  addresses: [],\n  onDelete: () => {},\n};\n\nexport default AddressList;\n","import React, { useState, useEffect } from 'react';\nimport { useSnackbar } from 'notistack';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport ConfirmationDialog from '../components/ConfirmationDialog';\nimport AddressList from '../components/AddressList';\nimport Loader from '../components/Loader';\nimport EshopAPI from '../EshopAPI';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nconst useStyles = makeStyles((theme) => ({\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    marginBottom: theme.spacing(2),\n  },\n  headerAction: {\n    fontSize: '0.7rem',\n  },\n}));\n\nfunction AddressListContainer(props) {\n  const { onNew, onEdit } = props;\n\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [{ loading, addresses, address, dialogOpen }, setStore] = useState({\n    addresses: [],\n    address: null,\n    loading: true,\n    dialogOpen: false,\n  });\n\n  function fetchAddresses() {\n    EshopAPI.fetchAddresses()\n      .then(({ data }) => {\n        setStore((store) => ({\n          ...store,\n          addresses: data,\n          loading: false,\n        }));\n      })\n      .catch(() => {\n        setStore((store) => ({ ...store, loading: false }));\n      });\n  }\n\n  function handleOpenDeleteDialog(e, address) {\n    setStore((store) => ({\n      ...store,\n      address,\n      dialogOpen: true,\n    }));\n  }\n\n  function handleCloseDeleteDialog() {\n    setStore((store) => ({ ...store, address: null, dialogOpen: false }));\n  }\n\n  function handleRemoveAddressFromList(addressId) {\n    setStore((store) => ({\n      ...store,\n      addresses: addresses.filter((address) => address.id !== addressId),\n    }));\n  }\n\n  function handleDeleteAddress() {\n    const addressId = address.id;\n    EshopAPI.deleteAddress(addressId)\n      .then(() => handleRemoveAddressFromList(addressId))\n      .catch(() => {\n        enqueueSnackbar(t('Error'), { variant: 'error' });\n      })\n      .finally(handleCloseDeleteDialog);\n  }\n\n  useEffect(() => {\n    fetchAddresses();\n  }, []);\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  return (\n    <>\n      <div className={classes.header}>\n        <Typography variant=\"h5\">{t('Addresses')}</Typography>\n        <Button className={classes.headerAction} onClick={onNew}>\n          {t('New address')}\n        </Button>\n      </div>\n      <AddressList\n        addresses={addresses}\n        onDelete={handleOpenDeleteDialog}\n        onEdit={onEdit}\n      />\n      <ConfirmationDialog\n        onConfirm={handleDeleteAddress}\n        onClose={handleCloseDeleteDialog}\n        title={t('Confirm deletion')}\n        open={dialogOpen}\n      >\n        <p>{address && address.address}</p>\n      </ConfirmationDialog>\n    </>\n  );\n}\n\nAddressListContainer.defaultProps = {\n  onNew: () => {},\n  onEdit: () => {},\n};\n\nexport default AddressListContainer;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\n\nimport Input from './Input';\n\nconst useStyles = makeStyles((theme) => ({\n  option: {\n    '&:hover': {\n      color: theme.palette.secondary.main,\n      backgroundColor: theme.palette.secondary.light,\n    },\n  },\n  listbox: {\n    overflow: 'auto',\n    maxHeight: '20vh',\n  },\n}));\n\nfunction AutoComplete(props) {\n  const {\n    options,\n    label,\n    name,\n    value,\n    onChange,\n    disabled,\n    onLoadMore,\n    getOptionLabel = (o) => o.label,\n    handleInputSearch,\n    ...rest\n  } = props;\n  const classes = useStyles();\n  const handleChange = (event, value) => {\n    onChange &&\n      onChange({\n        target: {\n          name,\n          value,\n        },\n      });\n  };\n\n  return (\n    <Autocomplete\n      fullWidth\n      value={value ?? null}\n      options={options}\n      disabled={disabled}\n      classes={classes}\n      getOptionLabel={getOptionLabel}\n      onChange={handleChange}\n      ListboxProps={{\n        onScroll: (event) => {\n          const { scrollTop, scrollHeight, clientHeight } = event.target;\n          const atScrollEnd = scrollTop === scrollHeight - clientHeight;\n          if (atScrollEnd && onLoadMore) {\n            onLoadMore();\n          }\n        },\n      }}\n      renderInput={(props) => {\n        return (\n          <Input\n            {...props}\n            label={label}\n            variant=\"filled\"\n            onChange={handleInputSearch}\n          />\n        );\n      }}\n      {...rest}\n    />\n  );\n}\nexport default AutoComplete;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport Box from '@material-ui/core/Box';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport Paper from './Paper';\nimport Input from './Input';\nimport Select from './Select';\nimport { useTranslation } from '../providers/TranslationProvider';\nimport AutoComplete from './AutoComplete';\n\nimport ClearIcon from '@material-ui/icons/Clear';\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(),\n    overflow: 'visible',\n  },\n}));\n\nfunction AddressForm(props) {\n  const {\n    errors,\n    values,\n    cities,\n    countries,\n    disabled,\n    layout,\n    fetchingCities,\n    onChange,\n    onSubmit,\n    onClear,\n    onLoadMoreCities,\n    handleCitySearchChange,\n  } = props;\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const addressEl = (\n    <Input\n      name=\"address\"\n      label={t('Address')}\n      value={values.address}\n      error={errors.address}\n      onChange={onChange}\n      disabled={disabled}\n      required\n    />\n  );\n\n  const addressComplementEl = (\n    <Input\n      name=\"addressComplement\"\n      label={t('Complement')}\n      value={values.addressComplement}\n      onChange={onChange}\n      disabled={disabled}\n    />\n  );\n\n  const countryEl = (\n    <Select\n      name=\"country\"\n      label={t('Country')}\n      value={values.country}\n      options={countries}\n      error={errors.country}\n      onChange={onChange}\n      disabled={disabled}\n      required\n    />\n  );\n\n  const cityEl = (\n    <Box display=\"flex\" alignItems=\"center\">\n      <AutoComplete\n        name=\"city\"\n        label={t('City')}\n        value={values.city}\n        options={cities}\n        error={errors.city}\n        onChange={onChange}\n        handleInputSearch={handleCitySearchChange}\n        disabled={disabled}\n        onLoadMore={onLoadMoreCities}\n        loading={fetchingCities}\n        disableClearable\n      />\n      {values?.city && (\n        <Box mt={1} mb={0.5} ml={0.5}>\n          <IconButton size=\"small\" onClick={() => onClear('city')}>\n            <ClearIcon fontSize=\"small\" />\n          </IconButton>\n        </Box>\n      )}\n    </Box>\n  );\n\n  const zipCodeEl = (\n    <Input\n      name=\"zipCode\"\n      label={t('Zip code')}\n      value={values.zipCode}\n      error={errors.zipCode}\n      onChange={onChange}\n      disabled={disabled}\n    />\n  );\n\n  const components = {\n    address: addressEl,\n    addressComplement: addressComplementEl,\n    country: countryEl,\n    city: cityEl,\n    zipCode: zipCodeEl,\n  };\n\n  return (\n    <Paper className={classes.paper}>\n      <form onSubmit={onSubmit} noValidate>\n        <Grid container spacing={2} justify=\"center\">\n          {layout.map(({ span, component }) => (\n            <Grid item xs={span} key={component}>\n              {components[component]}\n            </Grid>\n          ))}\n          <Grid item xs={12} align=\"right\">\n            <Button type=\"submit\" disabled={disabled}>\n              {t('Save')}\n            </Button>\n          </Grid>\n        </Grid>\n      </form>\n    </Paper>\n  );\n}\n\nAddressForm.defaultProps = {\n  errors: {},\n  values: {},\n  cities: [],\n  layout: [],\n  onChange: () => {},\n  onSubmit: () => {},\n};\n\nexport default AddressForm;\n","import React, { useState, useCallback, useEffect, useMemo } from 'react';\nimport { Grid } from '@material-ui/core';\nimport { useFormik } from 'formik';\nimport { useSnackbar } from 'notistack';\n\nimport EshopAPI from '../EshopAPI';\nimport AddressForm from '../components/AddressForm';\nimport Loader from '../components/Loader';\nimport { useTranslation } from '../providers/TranslationProvider';\nimport { useEshop } from '../providers/EshopProvider';\nimport useInfiniteLoading from '../hooks/useInfiniteLoading';\nimport useDebounce from '../hooks/useDebounce';\n\nfunction useCitites(options) {\n  const {\n    data: cities,\n    total,\n    page,\n    fetching,\n    fetchData,\n    loadMore,\n  } = useInfiniteLoading({\n    fetchAPI: EshopAPI.fetchCities,\n    ...options,\n  });\n\n  return useMemo(\n    () => ({\n      cities,\n      totalCities: total,\n      page,\n      fetchingCities: fetching,\n      fetchCities: fetchData,\n      loadMoreCities: loadMore,\n    }),\n    [cities, total, page, fetching, fetchData, loadMore]\n  );\n}\nfunction AddressFormContainer(props) {\n  const { redirectToAddressList, match, history, location } = props;\n  const { config, setInvoicingAddress, setDeliveryAddress } = useEshop();\n  const { params } = match;\n  const { addressId } = params;\n\n  const { enqueueSnackbar } = useSnackbar();\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [countries, setCountries] = useState([]);\n  const [validateOnChange, setValidateOnChange] = useState(false);\n  const [address, setAddress] = useState({\n    name: '',\n    personName: '',\n    addressComplement: '',\n    address: '',\n    city: '',\n    zipCode: '',\n    country: '',\n    id: undefined,\n  });\n  const [citySearchInput, setCitySearchInput] = useState();\n  const { cities, fetchingCities, fetchCities, loadMoreCities } = useCitites();\n  const debouncedFetchCities = useDebounce(fetchCities, 1000);\n\n  const handleRedirectAfterSave = useCallback(() => {\n    const fromUrl = location && location.state && location.state.fromUrl;\n    if (fromUrl) {\n      history.replace(fromUrl);\n    } else {\n      redirectToAddressList();\n    }\n  }, [location, history, redirectToAddressList]);\n\n  async function handleSubmitAddress(address) {\n    setSaving(true);\n    const service = address.id\n      ? EshopAPI.updateAddress(address.id, address)\n      : EshopAPI.addAddress(address);\n\n    service\n      .then((address) => {\n        if (address.id) {\n          setInvoicingAddress(address.id);\n          setDeliveryAddress(address.id);\n        }\n      })\n      .then(() => {\n        setSaving(false);\n        handleRedirectAfterSave();\n      })\n      .catch(() => {\n        enqueueSnackbar(t('Error'), { variant: 'error' });\n        setSaving(false);\n      });\n  }\n\n  useEffect(() => {\n    if (!addressId) {\n      // new address\n      setLoading(false);\n    } else {\n      EshopAPI.fetchAddress(addressId)\n        .then((address) => {\n          setAddress(address);\n          setLoading(false);\n        })\n        .catch(redirectToAddressList);\n    }\n  }, [addressId, redirectToAddressList]);\n\n  const {\n    values,\n    errors,\n    handleChange: handleChangeFormik,\n    handleSubmit: handleSubmitFormik,\n    setValues,\n    setFieldValue,\n  } = useFormik({\n    validateOnChange,\n    initialValues: {\n      name: address.name,\n      personName: address.personName,\n      addressComplement: address.addressComplement,\n      address: address.address,\n      city: address.city,\n      zipCode: address.zipCode,\n      country: address.country,\n      id: address.id,\n    },\n    validate: (values) => {\n      const errors = {};\n\n      if (!values.address) {\n        errors.address = `${t('Address')} ${t('Required')}`;\n      }\n      if (!values.country) {\n        errors.country = `${t('Country')} ${t('Required')}`;\n      }\n\n      return errors;\n    },\n    onSubmit: async (values) => {\n      await handleSubmitAddress(values);\n    },\n    enableReinitialize: true,\n  });\n\n  const { t } = useTranslation();\n\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      setValidateOnChange(true);\n      handleSubmitFormik();\n    },\n    [handleSubmitFormik]\n  );\n\n  const handleClear = useCallback(\n    (name) => {\n      setFieldValue(name, '');\n      if (name === 'city') {\n        setCitySearchInput('');\n        setFieldValue('zipCode', '');\n      }\n      setFieldValue(name, null);\n    },\n    [setFieldValue]\n  );\n\n  const handleChange = useCallback(\n    (e) => {\n      const { name, value } = e.target;\n      if (name === 'city') {\n        setValues({\n          ...values,\n          city: value,\n          zipCode: value?.zipCode || '',\n          country: value?.country,\n        });\n      } else if (name === 'country') {\n        setValues({\n          ...values,\n          country: value,\n          city: '',\n          zipCode: '',\n        });\n      } else {\n        handleChangeFormik(e);\n      }\n    },\n    [handleChangeFormik, values, setValues]\n  );\n\n  const handleCitySearchChange = useCallback((e) => {\n    setCitySearchInput(e.target.value);\n  }, []);\n\n  const handleLoadMoreCities = useCallback(() => {\n    if (!values.country) return;\n    loadMoreCities({ countryId: values.country });\n  }, [values.country, loadMoreCities]);\n\n  useEffect(() => {\n    if (values.country) {\n      debouncedFetchCities(\n        { countryId: values.country, search: citySearchInput },\n        { reset: true }\n      );\n    }\n  }, [citySearchInput, debouncedFetchCities, values.country]);\n\n  useEffect(() => {\n    EshopAPI.fetchCountries().then((countries) => {\n      setCountries(\n        countries.map((country) => ({\n          label: country.name,\n          value: country.id,\n        }))\n      );\n    });\n  }, []);\n\n  const zipCode = { span: 4, component: 'zipCode' };\n  const city = { span: 8, component: 'city' };\n\n  const layout = [\n    { span: 12, component: 'address' },\n    { span: 12, component: 'addressComplement' },\n    { span: 12, component: 'country' },\n    ...(config.isZipOnLeftOnEshop ? [zipCode, city] : [city, zipCode]),\n  ];\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  return (\n    <Grid container>\n      <Grid item xs={12} md={3}></Grid>\n      <Grid item xs={12} md={6}>\n        <AddressForm\n          cities={cities}\n          countries={countries}\n          values={values}\n          errors={errors}\n          disabled={saving}\n          layout={layout}\n          fetchingCities={fetchingCities}\n          onSubmit={handleSubmit}\n          onChange={handleChange}\n          onClear={handleClear}\n          onLoadMoreCities={handleLoadMoreCities}\n          handleCitySearchChange={handleCitySearchChange}\n        />\n      </Grid>\n      <Grid item xs={12} md={3}></Grid>\n    </Grid>\n  );\n}\n\nexport default AddressFormContainer;\n","import { useCallback, useMemo, useRef, useState } from 'react';\n\nexport default function useInfiniteLoading({\n  limit = 10,\n  fetchAPI,\n  transform: transformProp,\n} = {}) {\n  const [data, setData] = useState([]);\n  const [total, setTotal] = useState(0);\n  const [fetching, setFetching] = useState(false);\n\n  const pageRef = useRef(1);\n\n  const hasMore = useMemo(() => data.length < total, [data, total]);\n\n  const transform = useMemo(() => {\n    if (transformProp) return transformProp;\n    return (item) => item;\n  }, [transformProp]);\n\n  const fetchData = useCallback(\n    (value, { append, reset } = {}) => {\n      if (reset) {\n        setData([]);\n        setTotal(0);\n        pageRef.current = 1;\n      }\n      setFetching(true);\n      return fetchAPI(value, {\n        page: pageRef.current,\n        limit,\n      })\n        .then(({ data = [], total }) => {\n          setData((_data) =>\n            append ? [..._data, ...transform(data)] : transform(data)\n          );\n          setTotal(total);\n        })\n        .finally(() => {\n          setFetching(false);\n        });\n    },\n    [limit, fetchAPI, transform]\n  );\n\n  const loadMore = useCallback(\n    (value) => {\n      if (hasMore && !fetching) {\n        pageRef.current += 1;\n        return fetchData(value, { append: true });\n      }\n    },\n    [hasMore, fetching, fetchData]\n  );\n\n  return useMemo(\n    () => ({\n      data,\n      total,\n      page: pageRef.current,\n      fetching,\n      fetchData,\n      loadMore,\n    }),\n    [data, total, fetching, fetchData, loadMore]\n  );\n}\n","import React from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\n\nimport AddressListContainer from '../containers/AddressList';\nimport AddressFormContainer from '../containers/AddressForm';\n\nfunction Address(props) {\n  const { match, history } = props;\n  const { path, url } = match;\n\n  const newAddressPath = path + '/new';\n  const editAddressPath = path + '/:addressId';\n  const addressListPath = path;\n\n  const handleRedirect = React.useCallback(\n    (path, replace) => {\n      const cb = replace ? history.replace : history.push;\n      cb(path);\n    },\n    [history]\n  );\n\n  const redirectToNewAddress = React.useCallback(() => {\n    handleRedirect(`${url}/new`);\n  }, [url, handleRedirect]);\n\n  const redirectToEditAddress = React.useCallback(\n    (e, address) => {\n      handleRedirect(`${url}/${address.id}`);\n    },\n    [url, handleRedirect]\n  );\n\n  const redirectToAddressList = React.useCallback(() => {\n    handleRedirect(url, true);\n  }, [url, handleRedirect]);\n\n  const withRouterProps = React.useCallback(\n    (Component, props = {}) => (routerProps) => (\n      <Component {...routerProps} {...props} />\n    ),\n    []\n  );\n\n  return (\n    <Switch>\n      <Route\n        path={newAddressPath}\n        render={withRouterProps(AddressFormContainer, {\n          redirectToAddressList,\n        })}\n      />\n      <Route\n        path={editAddressPath}\n        render={withRouterProps(AddressFormContainer, {\n          redirectToAddressList,\n        })}\n      />\n      <Route\n        path={addressListPath}\n        render={withRouterProps(AddressListContainer, {\n          onNew: redirectToNewAddress,\n          onEdit: redirectToEditAddress,\n        })}\n      />\n\n      <Redirect to={path} />\n    </Switch>\n  );\n}\n\nexport default Address;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport NumberFormat from 'react-number-format';\n\nimport Input from './Input';\nimport Paper from './Paper';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(3),\n  },\n  error: {\n    color: theme.palette.error.main,\n  },\n}));\n\nconst MaskInput = (props) => {\n  const { onChange, inputRef, ...other } = props;\n\n  return (\n    <NumberFormat\n      {...other}\n      getInputRef={inputRef}\n      onValueChange={(values) => {\n        onChange({\n          target: {\n            name: props.name,\n            value: values.value,\n          },\n        });\n      }}\n      isNumericString\n    />\n  );\n};\n\nfunction limit(val, max) {\n  if (val.length === 1 && val[0] > max[0]) {\n    val = '0' + val;\n  }\n\n  if (val.length === 2) {\n    if (Number(val) === 0) {\n      val = '01';\n\n      //this can happen when user paste number\n    } else if (val > max) {\n      val = max;\n    }\n  }\n\n  return val;\n}\n\nfunction cardExpiry(val) {\n  const month = limit(val.substring(0, 2), '12');\n  const year = val.substring(2, 4);\n\n  return month + (year.length ? '/' + year : '');\n}\n\nfunction PaymentCardForm(props) {\n  const { errors, values, disabled, onChange, onSubmit } = props;\n\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  return (\n    <Paper className={classes.paper}>\n      <form onSubmit={onSubmit} noValidate>\n        <Grid container spacing={2} justify=\"center\">\n          <Grid item xs={12}>\n            <Input\n              name=\"name\"\n              label={t('Name')}\n              disabled={disabled}\n              value={values.name}\n              error={errors.name}\n              onChange={onChange}\n              required\n            />\n          </Grid>\n          <Grid item xs={12}>\n            <Input\n              name=\"cardNumber\"\n              label={t('Card number')}\n              disabled={disabled}\n              value={values.cardNumber}\n              error={errors.cardNumber}\n              onChange={onChange}\n              required\n              InputProps={{\n                inputComponent: MaskInput,\n                inputProps: {\n                  format: '#### #### #### ####',\n                  placeholder: '1234 1234 1234 1234',\n                },\n              }}\n            />\n          </Grid>\n\n          <Grid item xs={6}>\n            <Input\n              name=\"expiry\"\n              label={t('Expiry')}\n              disabled={disabled}\n              value={values.expiry}\n              error={errors.expiry}\n              onChange={onChange}\n              required\n              InputProps={{\n                inputComponent: MaskInput,\n                inputProps: {\n                  format: cardExpiry,\n                  placeholder: 'MM/YY',\n                },\n              }}\n            />\n          </Grid>\n          <Grid item xs={6}>\n            <Input\n              name=\"cvc\"\n              label={t('CVC')}\n              disabled={disabled}\n              value={values.cvc}\n              error={errors.cvc}\n              onChange={onChange}\n              required\n              InputProps={{\n                inputComponent: MaskInput,\n                inputProps: {\n                  format: '####',\n                  placeholder: 'CVC',\n                },\n              }}\n            />\n          </Grid>\n          <Grid item xs={12} align=\"right\">\n            <Button raised type=\"submit\" disabled={disabled}>\n              {t('Save')}\n            </Button>\n          </Grid>\n        </Grid>\n      </form>\n    </Paper>\n  );\n}\n\nPaymentCardForm.defaultProps = {\n  errors: {},\n  values: {},\n  disabled: false,\n  onChange: () => {},\n  onSubmit: () => {},\n};\n\nexport default PaymentCardForm;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useFormik } from 'formik';\nimport Grid from '@material-ui/core/Grid';\nimport { useSnackbar } from 'notistack';\n\nimport Loader from '../components/Loader';\nimport PaymentCardForm from '../components/PaymentCardForm';\nimport EshopAPI from '../EshopAPI';\nimport { useTranslation } from '../providers/TranslationProvider';\nimport { inRange } from './utils';\n\nfunction PaymentCardFormContainer(props) {\n  const { redirectToCardList, match } = props;\n  const { params } = match;\n  const { cardId } = params;\n\n  const { t } = useTranslation();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [card, setCard] = useState({\n    name: '',\n    cardNumber: '',\n    expiry: '',\n    cvc: '',\n  });\n  const [validateOnChange, setValidateOnChange] = useState(false);\n\n  async function handleSubmitPaymentCard(values) {\n    setSaving(true);\n    const service = card.id\n      ? EshopAPI.updatePaymentCard(card.id, values)\n      : EshopAPI.addPaymentCard(values);\n\n    service\n      .then(() => {\n        setSaving(false);\n        redirectToCardList();\n      })\n      .catch((error) => {\n        enqueueSnackbar(\n          t('Error') + `${error.message ? ` :  ${error.message}` : ''}`,\n          {\n            variant: 'error',\n          }\n        );\n        setSaving(false);\n      });\n  }\n\n  const {\n    values,\n    errors,\n    handleSubmit: handleSubmitFormik,\n    handleChange,\n  } = useFormik({\n    validateOnChange,\n    initialValues: {\n      name: card.name,\n      cardNumber: card.cardNumber,\n      expiry: card.expiry,\n      cvc: card.cvc,\n    },\n    validate: (values) => {\n      const errors = {};\n\n      if (!values.name) {\n        errors.name = `${t('Name')} ${t('Required')}`;\n      }\n\n      if (!values.cardNumber) {\n        errors.cardNumber = `${t('Card number')} ${t('Required')}`;\n      } else if (!inRange(String(values.cardNumber).length, 14, 16)) {\n        errors.cardNumber = `${t('Invalid card number')}`;\n      }\n\n      if (!values.expiry) {\n        errors.expiry = `${t('Expiry')} ${t('Required')}`;\n      } else if (String(values.expiry).length < 4) {\n        errors.expiry = `${t('Invalid expiry')}`;\n      }\n\n      if (!values.cvc) {\n        errors.cvc = `${t('CVC')} ${t('Required')}`;\n      } else if (String(values.cvc).length < 3) {\n        errors.cvc = `${t('Invalid cvc')}`;\n      }\n\n      return errors;\n    },\n    onSubmit: async (values) => {\n      await handleSubmitPaymentCard(values);\n    },\n    enableReinitialize: true,\n  });\n\n  useEffect(() => {\n    if (!cardId) {\n      // new card\n      setLoading(false);\n    } else {\n      EshopAPI.fetchPaymentCard(cardId)\n        .then((card) => {\n          setCard(card);\n          setLoading(false);\n        })\n        .catch(redirectToCardList);\n    }\n  }, [cardId, redirectToCardList]);\n\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      setValidateOnChange(true);\n      handleSubmitFormik();\n    },\n    [handleSubmitFormik]\n  );\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  return (\n    <Grid container>\n      <Grid item xs={12} md={3}></Grid>\n      <Grid item xs={12} md={6}>\n        <PaymentCardForm\n          values={values}\n          errors={errors}\n          disabled={saving}\n          onChange={handleChange}\n          onSubmit={handleSubmit}\n        />\n      </Grid>\n      <Grid item xs={12} md={3}></Grid>\n    </Grid>\n  );\n}\n\nexport default PaymentCardFormContainer;\n","export function inRange(value, min, max) {\n  return value && value >= min && value <= max;\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\nimport StarIcon from '@material-ui/icons/Star';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport Paper from './Paper';\n\nconst backgrounds = [\n  'linear-gradient(to right top, #e186d8, #e575c7, #e763b4, #e9509f, #e83a89, #e72b78, #e51a67, #e10055, #dd0045, #d80035, #d20024, #ca0810)',\n  'linear-gradient(to right top, #3dda76, #00d3a0, #00c9c0, #00bcd2, #00aed5, #00a4d4, #089ad2, #228fce, #0f87cf, #027fcf, #0877cf, #1a6ecd)',\n  'linear-gradient(to right top, #f2a826, #f09a1d, #ed8b15, #ea7c10, #e76d0e, #e96218, #ea5621, #ea4a29, #ef4038, #f33546, #f52a55, #f62063)',\n  'linear-gradient(to right top, #cd26f2, #b320df, #9a19cc, #8211b9, #6b09a6, #5e069e, #510496, #43028e, #3b048f, #310690, #250991, #140b92)',\n];\n\nconst cardBrandBackground = {\n  visa: backgrounds[0],\n  mastercard: backgrounds[1],\n  'american express': backgrounds[2],\n  default: backgrounds[3],\n};\n\nconst getCardBackground = (brand) => {\n  return (\n    cardBrandBackground[brand.toLowerCase()] || cardBrandBackground['default']\n  );\n};\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    height: 180,\n    display: 'flex',\n    cursor: 'pointer',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    padding: theme.spacing(2),\n    background: (props) => getCardBackground(props.brand),\n    borderRadius: `${theme.spacing(3)}px !important`,\n  },\n  text: {\n    color: 'white',\n    fontWeight: 'bold',\n  },\n  number: {\n    letterSpacing: theme.spacing(0.5),\n  },\n  icon: {\n    color: '#ffc107',\n  },\n}));\n\nfunction PaymentCard(props) {\n  const { card, isDefault, onEdit, onDelete, onDefault } = props;\n  const { brand = '', expiryDisplay = '', last4 = '' } = card;\n\n  const classes = useStyles({ brand });\n\n  const handleDelete = React.useCallback(\n    (e) => {\n      onDelete(e, card);\n    },\n    [onDelete, card]\n  );\n\n  const handleEdit = React.useCallback(\n    (e) => {\n      onEdit(e, card);\n    },\n    [onEdit, card]\n  );\n\n  const handleDefault = React.useCallback(\n    (e) => {\n      onDefault(e, card);\n    },\n    [onDefault, card]\n  );\n\n  return (\n    <Paper className={classes.paper}>\n      <div>\n        <Grid container justify=\"space-between\">\n          <Grid item>\n            <Typography variant=\"h6\" className={classes.text} align=\"right\">\n              {card.brand}\n            </Typography>\n          </Grid>\n          <Grid item>\n            <IconButton\n              size=\"small\"\n              className={classes.text}\n              onClick={handleDefault}\n            >\n              {isDefault ? (\n                <StarIcon className={classes.icon} />\n              ) : (\n                <StarBorderIcon className={classes.icon} />\n              )}\n            </IconButton>\n            <IconButton\n              size=\"small\"\n              className={classes.text}\n              onClick={handleEdit}\n            >\n              <EditIcon />\n            </IconButton>\n            <IconButton\n              size=\"small\"\n              className={classes.text}\n              onClick={handleDelete}\n            >\n              <DeleteIcon />\n            </IconButton>\n          </Grid>\n        </Grid>\n      </div>\n      <div>\n        <Typography\n          className={clsx(classes.text, classes.number)}\n          align=\"center\"\n        >\n          <b>{`      ${last4 || ''}`}</b>\n        </Typography>\n      </div>\n      <div>\n        <Grid container justify=\"space-between\">\n          <Grid item>\n            <Typography className={classes.text}>{card.name}</Typography>\n          </Grid>\n          <Grid item>\n            <Typography className={classes.text}>{expiryDisplay}</Typography>\n          </Grid>\n        </Grid>\n      </div>\n    </Paper>\n  );\n}\n\nPaymentCard.defaultProps = {\n  card: {},\n  onEdit: () => {},\n  onDelete: () => {},\n};\n\nexport default PaymentCard;\n","import React from 'react';\n\nimport List from './List';\nimport PaymentCard from './PaymentCard';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nfunction PaymentCardList(props) {\n  const { cards, defaultCardId, onDelete, onEdit, onDefault } = props;\n\n  const { t } = useTranslation();\n\n  return (\n    <List\n      values={cards}\n      renderItem={(card) => (\n        <PaymentCard\n          card={card}\n          onDefault={onDefault}\n          onDelete={onDelete}\n          onEdit={onEdit}\n          isDefault={card.id === defaultCardId}\n        />\n      )}\n      noRecordLabel={t('No record found')}\n    />\n  );\n}\n\nPaymentCardList.defaultProps = {\n  cards: [],\n  onDelete: () => {},\n  onEdit: () => {},\n};\n\nexport default PaymentCardList;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { useSnackbar } from 'notistack';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Loader from '../components/Loader';\nimport PaymentCardList from '../components/PaymentCardList';\nimport ConfirmationDialog from '../components/ConfirmationDialog';\nimport EshopAPI from '../EshopAPI';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nconst usePaymentCardListStyles = makeStyles((theme) => ({\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    marginBottom: theme.spacing(2),\n  },\n  headerAction: {\n    fontSize: '0.7rem',\n  },\n  loader: {\n    position: 'absolute',\n    inset: 0,\n    justifyContent: 'center',\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0,0,0,0.4)',\n    zIndex: 2,\n  },\n}));\n\nfunction PaymentCardListContainer(props) {\n  const { onNew, onEdit } = props;\n\n  const { t } = useTranslation();\n  const classes = usePaymentCardListStyles();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [cards, setCards] = useState([]);\n  const [defaultPaymentCardId, setDefaultPaymentCardId] = useState();\n  const [card, setCard] = useState();\n  const [loading, setLoading] = useState(true);\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const [savingDefault, setSavingDefault] = useState(false);\n\n  function fetchPaymentCards() {\n    EshopAPI.fetchPaymentCards()\n      .then((res) => {\n        const cards = res.data;\n        EshopAPI.fetchDefaultPaymentCard()\n          .then((res) => {\n            if (res.id) {\n              setDefaultPaymentCardId(res.id);\n            }\n            setCards(cards);\n            setLoading(false);\n          })\n          .catch(() => {\n            setCards(cards);\n            setLoading(false);\n          });\n      })\n      .catch(() => {\n        setLoading(false);\n      });\n  }\n\n  useEffect(() => {\n    fetchPaymentCards();\n  }, []);\n\n  function handleOpenDeleteDialog(e, card) {\n    setCard(card);\n    setDeleteDialogOpen(true);\n  }\n\n  function handleCloseDeleteDialog() {\n    setCard(null);\n    setDeleteDialogOpen(false);\n  }\n\n  function handleRemoveCardFromList(cardId) {\n    setCards((cards) => cards.filter((card) => card.id !== cardId));\n  }\n\n  function handleDeleteCard() {\n    const cardId = card.id;\n    EshopAPI.deletePaymentCard(cardId)\n      .then(() => handleRemoveCardFromList(cardId))\n      .catch(() => {\n        enqueueSnackbar(t('Error'), { variant: 'error' });\n      })\n      .finally(handleCloseDeleteDialog);\n  }\n\n  const handleUpdateDefaultCard = useCallback(\n    (e, card) => {\n      const cardId = card.id;\n      setSavingDefault(true);\n      return EshopAPI.updateDefaultPaymentCard(cardId)\n        .then(() => {\n          setDefaultPaymentCardId(cardId);\n        })\n        .catch(() => {\n          enqueueSnackbar(t('Error'), { variant: 'error' });\n        })\n        .finally(() => {\n          setSavingDefault(false);\n        });\n    },\n    [enqueueSnackbar, t]\n  );\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  return (\n    <>\n      {savingDefault && (\n        <div className={classes.loader}>\n          <Loader />\n        </div>\n      )}\n      <div className={classes.header}>\n        <Typography variant=\"h5\">{t('Credit card')}</Typography>\n        <Button className={classes.headerAction} onClick={onNew}>\n          {t('Add a credit card')}\n        </Button>\n      </div>\n      <PaymentCardList\n        cards={cards}\n        defaultCardId={defaultPaymentCardId}\n        onDelete={handleOpenDeleteDialog}\n        onDefault={handleUpdateDefaultCard}\n        onEdit={onEdit}\n      />\n      <ConfirmationDialog\n        onConfirm={handleDeleteCard}\n        onClose={handleCloseDeleteDialog}\n        title={t('Confirm deletion')}\n        open={deleteDialogOpen}\n      >\n        <p>{card && `      ${card.last4}`}</p>\n      </ConfirmationDialog>\n    </>\n  );\n}\n\nexport default PaymentCardListContainer;\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\n\nimport PaymentCardFormContainer from '../containers/PaymentCardForm';\nimport PaymentCardListContainer from '../containers/PaymentCardList';\n\nfunction PaymentCard(props) {\n  const { match, history } = props;\n  const { path, url } = match;\n\n  const newPaymentCardPath = path + '/new';\n  const editPaymentCardPath = path + '/:cardId';\n  const paymentCardListPath = path;\n\n  const handleRedirect = React.useCallback(\n    (path, replace) => {\n      const cb = replace ? history.replace : history.push;\n      cb(path);\n    },\n    [history]\n  );\n\n  const redirectToNewCard = React.useCallback(() => {\n    handleRedirect(`${url}/new`);\n  }, [url, handleRedirect]);\n\n  const redirectToEditCard = React.useCallback(\n    (e, card) => {\n      handleRedirect(`${url}/${card.id}`);\n    },\n    [url, handleRedirect]\n  );\n\n  const redirectToCardList = React.useCallback(() => {\n    handleRedirect(url, true);\n  }, [url, handleRedirect]);\n\n  const withRouterProps = React.useCallback(\n    (Component, props = {}) => (routerProps) => (\n      <Component {...routerProps} {...props} />\n    ),\n    []\n  );\n\n  return (\n    <Switch>\n      <Route\n        exact\n        path={newPaymentCardPath}\n        render={withRouterProps(PaymentCardFormContainer, {\n          redirectToCardList,\n        })}\n      />\n      <Route\n        exact\n        path={editPaymentCardPath}\n        render={withRouterProps(PaymentCardFormContainer, {\n          redirectToCardList,\n        })}\n      />\n      <Route\n        exact\n        path={paymentCardListPath}\n        render={withRouterProps(PaymentCardListContainer, {\n          onNew: redirectToNewCard,\n          onEdit: redirectToEditCard,\n        })}\n      />\n    </Switch>\n  );\n}\n\nexport default PaymentCard;\n","import React from 'react';\nimport clsx from 'clsx';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport BackIcon from '@material-ui/icons/ArrowBack';\n\nconst useBackButtonStyles = makeStyles((theme) => ({\n  root: {\n    color: theme.palette.secondary.main,\n  },\n}));\n\nfunction BackButton(props) {\n  const { onClick, size, className } = props;\n\n  const classes = useBackButtonStyles();\n\n  return (\n    <IconButton\n      size={size}\n      onClick={onClick}\n      className={clsx(classes.root, className)}\n    >\n      <BackIcon />\n    </IconButton>\n  );\n}\n\nBackButton.defaultProps = { onClick: () => {}, size: 'medium' };\n\nexport default BackButton;\n","import React, { useState, useCallback } from 'react';\nimport { Switch, Route, withRouter } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport IconButton from '@material-ui/core/IconButton';\nimport Badge from '@material-ui/core/Badge';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Drawer from '@material-ui/core/Drawer';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\n\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport ShoppingBasketIcon from '@material-ui/icons/ShoppingBasket';\nimport AddressIcon from '@material-ui/icons/Room';\nimport PaymentCardIcon from '@material-ui/icons/CreditCard';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport Divider from '../components/Divider';\nimport BackButton from '../components/BackButton';\nimport { useEshop } from '../providers/EshopProvider';\nimport { useTranslation } from '../providers/TranslationProvider';\n\nconst useClientToolbarStyles = makeStyles({\n  root: {\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n  },\n});\n\nfunction ClientToolbar(props) {\n  const { onBack } = props;\n  const classes = useClientToolbarStyles();\n  return (\n    <div className={classes.root}>\n      <BackButton onClick={onBack} />\n    </div>\n  );\n}\n\nClientToolbar.defaultProps = { onBack: () => {} };\n\nconst useShoppingCartStyles = makeStyles((theme) => ({\n  badge: {\n    color: '#FFFFFF',\n    backgroundColor: theme.palette.secondary.main,\n  },\n}));\n\nfunction ShoppingCart({ onClick, content }) {\n  const classes = useShoppingCartStyles();\n\n  const { cart } = useEshop();\n\n  const cartLength = Object.values(cart || {}).reduce(\n    (a, b) => Number(a) + Number(b),\n    0\n  );\n\n  return (\n    <IconButton size=\"small\" onClick={onClick}>\n      <Badge badgeContent={cartLength} classes={{ badge: classes.badge }}>\n        <ShoppingCartIcon />\n      </Badge>\n    </IconButton>\n  );\n}\n\nconst useEshopToolbarStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  eshopName: {\n    color: theme.palette.secondary.main,\n    fontWeight: 'bold',\n  },\n  sidebarPaper: {\n    paddingTop: theme.spacing(5),\n  },\n  listItem: {\n    '&:hover': {\n      color: theme.palette.secondary.main,\n      backgroundColor: theme.palette.secondary.light,\n      '& .list-icon': {\n        color: theme.palette.secondary.main,\n      },\n    },\n  },\n}));\nfunction EshopToolbar(props) {\n  const {\n    showMenuButton,\n    showBackButton,\n    onBack,\n    onCheckout,\n    onLinkClick,\n  } = props;\n\n  const { t } = useTranslation();\n  const classes = useEshopToolbarStyles();\n\n  const [sideBarOpen, setSideBarOpen] = useState(false);\n\n  const handleLinkClick = useCallback(\n    (type) => {\n      setSideBarOpen(false);\n      setTimeout(() => {\n        onLinkClick(type); // Redirect after sidebar closes\n      }, 200);\n    },\n    [onLinkClick]\n  );\n\n  const links = [\n    {\n      label: t('Eshop'),\n      Icon: ShoppingBasketIcon,\n      onClick: () => handleLinkClick('eshop'),\n    },\n    {\n      label: t('Addresses'),\n      Icon: AddressIcon,\n      onClick: () => handleLinkClick('address'),\n    },\n    {\n      label: t('Payment Cards'),\n      Icon: PaymentCardIcon,\n      onClick: () => handleLinkClick('payment-card'),\n    },\n  ];\n\n  return (\n    <div className={classes.root}>\n      {showMenuButton && (\n        <IconButton\n          onClick={() => {\n            setSideBarOpen((open) => !open);\n          }}\n        >\n          <MenuIcon />\n        </IconButton>\n      )}\n      {showBackButton && <BackButton onClick={onBack} />}\n      &nbsp;\n      <div className={classes.grow}></div>\n      <ShoppingCart onClick={onCheckout} />\n      <Drawer\n        anchor=\"left\"\n        open={sideBarOpen}\n        onClose={() => setSideBarOpen(false)}\n        ModalProps={{ disablePortal: true }}\n        PaperProps={{\n          className: classes.sidebarPaper,\n        }}\n      >\n        <div>\n          <Divider />\n        </div>\n        <List>\n          {links.map(({ label, Icon, onClick }) => (\n            <React.Fragment key={label}>\n              <ListItem\n                button\n                key={label}\n                className={classes.listItem}\n                onClick={onClick}\n              >\n                <ListItemIcon className=\"list-icon\">\n                  <Icon />\n                </ListItemIcon>\n                <ListItemText primary={label} />\n              </ListItem>\n            </React.Fragment>\n          ))}\n        </List>\n      </Drawer>\n    </div>\n  );\n}\n\nEshopToolbar.defaultProps = {\n  showBackButton: true,\n  showMenuButton: true,\n  onBack: () => {},\n  onCheckout: () => {},\n  onLinkClick: () => {},\n};\n\nconst useGeneralToolbarStyles = makeStyles((theme) => ({\n  container: { display: 'flex', alignItems: 'center' },\n  tabsIndicator: {\n    backgroundColor: theme.palette.secondary.main,\n  },\n  tabRoot: {\n    '&:hover': {\n      backgroundColor: theme.palette.secondary.light,\n      color: theme.palette.secondary.main,\n    },\n  },\n  tabSelected: {\n    backgroundColor: theme.palette.secondary.light,\n    color: theme.palette.secondary.main,\n  },\n  rippleChild: {\n    backgroundColor: theme.palette.secondary.main,\n  },\n}));\n\nfunction GeneralToolbar(props) {\n  const { activeLink, onClick, onCheckout, isPaymentCardActivated } = props;\n\n  const { t } = useTranslation();\n  const classes = useGeneralToolbarStyles();\n\n  return (\n    <div className={classes.container}>\n      <Tabs\n        value={activeLink}\n        classes={{\n          indicator: classes.tabsIndicator,\n        }}\n      >\n        {[\n          { route: 'eshop', label: t('Eshop') },\n          { route: 'address', label: t('Addresses') },\n          {\n            route: 'payment-card',\n            label: t('Payment Cards'),\n            active: isPaymentCardActivated,\n          },\n        ].map(({ active = true, ...item }) => {\n          return (\n            active && (\n              <Tab\n                classes={{\n                  root: classes.tabRoot,\n                  selected: classes.tabSelected,\n                }}\n                key={item.route}\n                label={item.label}\n                value={item.route}\n                onClick={() => {\n                  onClick && onClick(item.route);\n                }}\n                TouchRippleProps={{\n                  classes: {\n                    child: classes.rippleChild,\n                  },\n                }}\n              />\n            )\n          );\n        })}\n      </Tabs>\n      &nbsp;\n      <ShoppingCart onClick={onCheckout} />\n    </div>\n  );\n}\n\nTopbar.defaultProps = { activeLink: 'shop', onClick: () => {} };\n\nconst useStyles = makeStyles((theme) => ({\n  appbar: {\n    zIndex: 1000,\n    backgroundColor: '#FFFFFF',\n  },\n  toolbar: {\n    width: '100%',\n    height: '100%',\n    margin: 'auto',\n    justifyContent: 'flex-end',\n    maxWidth: 1400 + theme.spacing(2),\n  },\n}));\n\nfunction Topbar(props) {\n  const { location, history, match, isPaymentCardActivated } = props;\n  const { url, path } = match;\n  const { pathname } = location;\n\n  const classes = useStyles();\n\n  const getActiveLink = useCallback(() => {\n    if (pathname.includes('eshop/address')) {\n      return 'address';\n    } else if (pathname.includes('eshop/payment-card')) {\n      return 'payment-card';\n    } else {\n      return 'eshop';\n    }\n  }, [pathname]);\n\n  const handleLinkClick = useCallback(\n    (type = 'eshop') => {\n      if (type === 'address') {\n        history.push(`${path}/address`);\n      } else if (type === 'payment-card') {\n        history.push(`${path}/payment-card`);\n      } else {\n        history.push(path);\n      }\n    },\n    [history, path]\n  );\n\n  const handleCheckout = useCallback(() => {\n    history.push(`${url}/checkout`);\n  }, [history, url]);\n\n  const handleRedirectToAddressList = useCallback(() => {\n    history.replace(`${url}/address`);\n  }, [history, url]);\n\n  const handleRedirectToPaymentCardList = useCallback(() => {\n    history.replace(`${url}/payment-card`);\n  }, [history, url]);\n\n  const handleRedirectToEshop = useCallback(() => {\n    history.replace({\n      pathname: url,\n      state: location.state,\n      search: location.search,\n    });\n  }, [history, url, location]);\n\n  const handleAddressFormOnBack = useCallback(() => {\n    const fromUrl = location && location.state && location.state.fromUrl;\n    if (fromUrl) {\n      history.replace(fromUrl);\n    } else {\n      handleRedirectToAddressList();\n    }\n  }, [history, location, handleRedirectToAddressList]);\n\n  const activeLink = getActiveLink();\n\n  const generalToolbarProps = {\n    activeLink,\n    onClick: handleLinkClick,\n    onCheckout: handleCheckout,\n    isPaymentCardActivated,\n  };\n\n  return (\n    <AppBar className={classes.appbar} position=\"relative\" color=\"default\">\n      <Toolbar className={classes.toolbar} variant=\"dense\">\n        <Switch>\n          <Route\n            exact\n            path={path}\n            render={(props) => (\n              <GeneralToolbar {...props} {...generalToolbarProps} />\n            )}\n          />\n          <Route\n            exact\n            path={`${path}/address`}\n            render={(props) => (\n              <GeneralToolbar {...props} {...generalToolbarProps} />\n            )}\n          />\n          <Route\n            path={`${path}/address/:addressId`}\n            render={(props) => (\n              <ClientToolbar {...props} onBack={handleAddressFormOnBack} />\n            )}\n          />\n          <Route\n            exact\n            path={`${path}/payment-card`}\n            render={(props) => (\n              <GeneralToolbar {...props} {...generalToolbarProps} />\n            )}\n          />\n          <Route\n            path={`${path}/payment-card/:paymentCardId`}\n            render={(props) => (\n              <ClientToolbar\n                {...props}\n                onBack={handleRedirectToPaymentCardList}\n              />\n            )}\n          />\n          <Route path={`${path}/checkout/:message`} render={(props) => null} />\n          <Route\n            path={`${path}/checkout`}\n            render={(props) => (\n              <EshopToolbar\n                {...props}\n                onBack={handleRedirectToEshop}\n                onCheckout={handleCheckout}\n                onLinkClick={handleLinkClick}\n                showMenuButton={false}\n              />\n            )}\n          />\n          <Route\n            path={`${path}/product/:productId`}\n            render={(props) => (\n              <EshopToolbar\n                {...props}\n                onBack={handleRedirectToEshop}\n                onCheckout={handleCheckout}\n                onLinkClick={handleLinkClick}\n                showMenuButton={false}\n              />\n            )}\n          />\n        </Switch>\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nTopbar.defaultProps = {\n  activeLink: 'shop',\n  onClick: () => {},\n  onCheckout: () => {},\n};\n\nexport default withRouter(Topbar);\n","import React from 'react';\nimport { useTheme } from 'goovee-lib';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Eshop from './pages/Eshop';\nimport Address from './pages/Address';\nimport PaymentCard from './pages/PaymentCard';\nimport TopBar from './containers/Topbar';\nimport Loader from './components/Loader';\nimport EshopAPI from './EshopAPI';\nimport { useTranslation } from './providers/TranslationProvider';\nimport { useSession } from './providers/SessionProvider';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    position: 'relative',\n    overflow: 'auto',\n    height: (props) => `calc(100% - ${props.theme.spacingUnit * 6}px)`, //Height of topbar\n    padding: (props) => props.theme.spacingUnit * 3,\n    maxWidth: 1400,\n    marginRight: 'auto',\n    marginLeft: 'auto',\n    [theme.breakpoints.down('sm')]: {\n      // Todo consistent breakpoints\n      padding: (props) => props.theme.spacingUnit * 2,\n    },\n  },\n}));\n\nfunction EshopContainer(props) {\n  const [loading, setLoading] = React.useState(true);\n\n  const { user } = useSession();\n  const userLanguage = user && user.language;\n\n  const [config, setConfig] = React.useState({\n    isPaymentCardActivated: false,\n  });\n\n  const { match } = props;\n  const { path } = match;\n\n  const theme = useTheme();\n  const classes = useStyles({ theme });\n  const { i18n } = useTranslation();\n\n  const addressPath = path + '/address';\n  const paymentCardPath = path + '/payment-card';\n  const eshopPath = path;\n\n  React.useEffect(() => {\n    EshopAPI.fetchPaymentCardConfiguration()\n      .then((paymentCardConfiguration) => {\n        setConfig({ ...paymentCardConfiguration });\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  React.useEffect(() => {\n    if (userLanguage) {\n      setLoading(true);\n      i18n.changeLanguage(userLanguage).finally(() => {\n        setLoading(false);\n      });\n    }\n  }, [userLanguage, i18n]);\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  return (\n    <>\n      <TopBar isPaymentCardActivated={config.isPaymentCardActivated} />\n      <div className={classes.container}>\n        <Switch>\n          <Route path={addressPath} component={Address} />\n          {config.isPaymentCardActivated && (\n            <Route path={paymentCardPath} component={PaymentCard} />\n          )}\n          <Route path={eshopPath} component={Eshop} />\n          <Redirect to={{ pathname: path }} />\n        </Switch>\n      </div>\n    </>\n  );\n}\n\nexport default EshopContainer;\n","import React from 'react';\nimport { CssBaseline } from '@material-ui/core';\nimport {\n  createMuiTheme,\n  ThemeProvider as MuiThemeProvider,\n  makeStyles as muiMakeStyles,\n} from '@material-ui/core/styles';\n\nexport const COLORS = {\n  darkBlue: '#293847',\n  grey: '#9E9E9E',\n  green: '#3ECF8E',\n  lightGreen: 'rgba(62, 207, 142, 0.1)',\n};\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: COLORS.darkBlue,\n    },\n    secondary: {\n      light: COLORS.lightGreen,\n      main: COLORS.green,\n      contrastText: '#FFFFFF',\n    },\n  },\n  overrides: {\n    MuiTypography: {\n      colorTextPrimary: { color: COLORS.darkBlue },\n    },\n    MuiButton: {\n      root: {\n        borderRadius: 20,\n      },\n    },\n  },\n  props: {\n    MuiInput: {\n      disableUnderline: true,\n    },\n    MuiTextField: {\n      variant: 'outlined',\n      margin: 'dense',\n      fullWidth: true,\n    },\n    MuiButton: {\n      variant: 'contained',\n      color: 'secondary',\n    },\n  },\n  custom: {\n    COLORS,\n  },\n});\n\nfunction ThemeProvider({ children }) {\n  return (\n    <MuiThemeProvider theme={theme}>\n      <CssBaseline />\n      {children}\n    </MuiThemeProvider>\n  );\n}\n\nexport const makeStyles = muiMakeStyles;\n\nexport default ThemeProvider;\n","import React from 'react';\nimport { SnackbarProvider as NotistackSnackbarProvider } from 'notistack';\n\nfunction SnackbarProvider(props) {\n  const { children } = props;\n\n  const anchorOrigin = React.useMemo(\n    () => ({ vertical: 'bottom', horizontal: 'left' }),\n    []\n  );\n\n  return (\n    <NotistackSnackbarProvider\n      autoHideDuration={3000}\n      maxSnack={3}\n      anchorOrigin={anchorOrigin}\n    >\n      {children}\n    </NotistackSnackbarProvider>\n  );\n}\n\nexport default SnackbarProvider;\n","import React from 'react';\nimport { CssBaseline } from '@material-ui/core';\nimport { HashRouter, Route, Redirect, Switch } from 'react-router-dom';\n\nimport EshopApp from './EshopApp';\nimport TranslationProvider from './providers/TranslationProvider';\nimport ThemeProvider from './providers/ThemeProvider';\nimport SnackbarProvider from './providers/SnackbarProvider';\nimport EshopProvider from './providers/EshopProvider';\nimport SessionProvider from './providers/SessionProvider';\n\nfunction Eshop() {\n  return (\n    <React.Suspense fallback=\"\">\n      <HashRouter>\n        <CssBaseline />\n        <ThemeProvider>\n          <TranslationProvider>\n            <SessionProvider>\n              <EshopProvider>\n                <SnackbarProvider>\n                  <Switch>\n                    <Route path=\"/eshop\" component={EshopApp} />\n                    <Redirect to=\"/eshop\" />\n                  </Switch>\n                </SnackbarProvider>\n              </EshopProvider>\n            </SessionProvider>\n          </TranslationProvider>\n        </ThemeProvider>\n      </HashRouter>\n    </React.Suspense>\n  );\n}\n\nexport default Eshop;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport Eshop from './Eshop';\nimport './index.css';\n\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Eshop />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}